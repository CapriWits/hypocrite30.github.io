

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon%2032x32.ico">
  <link rel="icon" href="/img/favicon%2032x32.ico">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="hypocrite30">
  <meta name="keywords" content="">
  
  <title>Javaå¸¸ç”¨é›†åˆæºç åˆ†æ â…  - hypocrite30</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/idea.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.9","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":"Â§"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":2},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":"b5f391eebc7eaea88e68a49d5924e381","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Hypocrite30 BLOG</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/postPage.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Javaå¸¸ç”¨é›†åˆæºç åˆ†æ â… ">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-08-10 22:46" pubdate>
        2021å¹´8æœˆ10æ—¥ æ™šä¸Š
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      6.1k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      105
       åˆ†é’Ÿ
    </span>
  

  
  
    
      <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Javaå¸¸ç”¨é›†åˆæºç åˆ†æ â… </h1>
            
              <p class="note note-info">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2021å¹´8æœˆ10æ—¥ æ™šä¸Š
                
              </p>
            
            <div class="markdown-body">
              <h1 id="Javaå¸¸ç”¨é›†åˆæºç åˆ†æ-â… "><a href="#Javaå¸¸ç”¨é›†åˆæºç åˆ†æ-â… " class="headerlink" title="Javaå¸¸ç”¨é›†åˆæºç åˆ†æ â… "></a>Javaå¸¸ç”¨é›†åˆæºç åˆ†æ â… </h1><blockquote>
<p>@Version: JDK 1.8</p>
<p>@IDE: IntellJ IDEA 2021.1</p>
<p>@Date: 2021/8/7 </p>
<p>@Author: Hypocrite30</p>
</blockquote>
<h2 id="ä¸€ã€é›†åˆ"><a href="#ä¸€ã€é›†åˆ" class="headerlink" title="ä¸€ã€é›†åˆ"></a>ä¸€ã€é›†åˆ</h2><ul>
<li>é›†åˆä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š<code>Collection</code> &amp; <code>Map</code> </li>
</ul>
<p><img src="https://gitee.com/hypocrite30/ImgBed/raw/master/img/JavaCommons/image-20210807224135029.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://gitee.com/hypocrite30/ImgBed/raw/master/img/JavaCommons/image-20210807224413506.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="â… ã€Collectionæ¥å£"><a href="#â… ã€Collectionæ¥å£" class="headerlink" title="â… ã€Collectionæ¥å£"></a>â… ã€Collectionæ¥å£</h3><ul>
<li>æœ‰äº›å®ç°ç±»æœ‰åºã€ŒListã€ï¼Œæœ‰äº›æ— åºã€ŒSetã€</li>
<li>æœ‰äº›å¯æ”¾é‡å¤å…ƒç´ ï¼Œæœ‰äº›ä¸å¯ä»¥</li>
<li>Collection æ¥å£æ²¡æœ‰ç›´æ¥çš„å®ç°å­ç±»ï¼Œé€šè¿‡å­æ¥å£ã€ŒSetã€ã€ŒListã€å®ç°</li>
</ul>
<h3 id="â…¡ã€Iteratoræ¥å£"><a href="#â…¡ã€Iteratoræ¥å£" class="headerlink" title="â…¡ã€Iteratoræ¥å£"></a>â…¡ã€Iteratoræ¥å£</h3><ul>
<li>å› ä¸º<code>Collection&lt;E&gt; extends Iterable&lt;E&gt;</code> ï¼Œæ‰€ä»¥æ‰€æœ‰å­ç±»éƒ½å¯ä»¥é€šè¿‡è·å– <code>Iterator</code> éå†é›†åˆ</li>
</ul>
<p>å¸¸è§æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th align="center">boolean</th>
<th>hashNext()</th>
<th>Returns: true if the iteration has more elements</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><b>E</b></td>
<td><b>next()</b></td>
<td><b>Returns: the next element in the iteration</b></td>
</tr>
<tr>
<td align="center"><b>void</b></td>
<td><b>remove()</b></td>
<td><b>Removes from the underlying collection the last element returned by this iterator</b></td>
</tr>
</tbody></table>
<p>ğŸ“Œï¼šåœ¨è°ƒç”¨ <code>iterator.next()</code> ä¹‹å‰å¿…é¡»è°ƒç”¨ <code>iterator.hasNext()</code> åˆ¤æ–­åé¢æ˜¯å¦å­˜åœ¨å…ƒç´ ã€‚è‹¥ä¸è°ƒç”¨ï¼Œåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè°ƒç”¨ <code>next()</code> ä¼šæŠ›å‡º <code>NoSuchElementException</code></p>
<h3 id="â…¢ã€Listæ¥å£"><a href="#â…¢ã€Listæ¥å£" class="headerlink" title="â…¢ã€Listæ¥å£"></a>â…¢ã€Listæ¥å£</h3><ul>
<li>å…ƒç´ æœ‰åº</li>
<li>å¯é‡å¤</li>
<li>æ”¯æŒç´¢å¼•</li>
<li>æ¯ä¸ªå…ƒç´ æœ‰ä¸€ä¸ªæ•´æ•°å‹åºå·ï¼Œè®°å½•å…ƒç´ åœ¨å®¹å™¨ä¸­çš„ä½ç½®ï¼Œå¯ç”¨äºå­˜å–</li>
</ul>
<h2 id="äºŒã€ArrayList"><a href="#äºŒã€ArrayList" class="headerlink" title="äºŒã€ArrayList"></a>äºŒã€ArrayList</h2><ul>
<li><code>ArrayList</code> å¯ä»¥å­˜æ”¾ä»»ä½•æ•°æ®ï¼ŒåŒ…æ‹¬ <code>null</code></li>
<li><code>ArrayList</code> åŸºæœ¬ç­‰åŒäº <code>Vector</code>ï¼ŒåŒºåˆ«åœ¨äºå‰è€…æ˜¯<strong>çº¿ç¨‹ä¸å®‰å…¨</strong>çš„ã€Œæ‰§è¡Œæ•ˆç‡é«˜ã€</li>
<li><code>ArrayList</code> å†…éƒ¨å­˜å‚¨æ•°æ®ç»“æ„ä¸º<strong>æ•°ç»„</strong></li>
</ul>
<h3 id="â… ã€Field"><a href="#â… ã€Field" class="headerlink" title="â… ã€Field"></a>â… ã€Field</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é»˜è®¤åˆå§‹åŒ–å®¹é‡</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> DEFAULT_CAPACITY = <span class="hljs-number">10</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç©ºæ•°ç»„å®¹é‡ä¸º0ï¼Œæœ‰å‚æ„é€ é»˜è®¤ä½¿ç”¨çš„å­˜å‚¨æ•°æ®ç»“æ„</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç©ºæ•°ç»„å®¹é‡ä¸º0ï¼Œæ— å‚æ„é€ æ—¶é»˜è®¤ä½¿ç”¨çš„å­˜å‚¨æ•°æ®ç»“æ„</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¿™ArrayListåº•å±‚ç”¨åˆ°çš„å­˜å–æ•°æ®çš„æ•°ç»„</span><br><span class="hljs-comment"> * éç§æœ‰ï¼Œä»¥ç®€åŒ–åµŒå¥—ç±»è®¿é—®</span><br><span class="hljs-comment"> * transient ä¸å…è®¸åºåˆ—åŒ–</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">transient</span> Object[] elementData;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®é™…ArrayListé›†åˆå¤§å°</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> size;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¯åˆ†é…çš„æœ€å¤§å®¹é‡</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAX_ARRAY_SIZE = Integer.MAX_VALUE - <span class="hljs-number">8</span>;<br></code></pre></div></td></tr></table></figure>
<p>ğŸ“Œå‡ ç‚¹è¯´æ˜ï¼š</p>
<ul>
<li>æ— å‚æ„é€ ï¼Œæ•°ç»„é»˜è®¤åˆå§‹åŒ–å®¹é‡æ˜¯ <strong>10</strong></li>
<li>é¢„å…ˆåˆ›å»ºå¥½ä¸¤ä¸ªç©ºæ•°ç»„ï¼Œåœ¨æ„é€ è¿‡ç¨‹ä¸­ï¼Œç›´æ¥èµ‹å€¼ç»™å­˜å‚¨æ•°ç»„</li>
<li>çœŸæ­£å­˜å‚¨æ•°æ®çš„æ•°ç»„æ˜¯ <code>Object[] elementData</code>ï¼Œå¹¶ä¸”è¢« <code>transient</code> ä¿®é¥°ï¼Œè¿™æ ·åºåˆ—åŒ–ä¸ä¼šå°†å…¶å†™å…¥æµä¸­ï¼Œä½†æ˜¯è¿™æ ·ååºåˆ—åŒ–ä¼šä¸¢å¤±æ•°æ®ï¼Œéœ€è¦åˆ†æ <code>writeObject(ObjectOutputStream s)</code> å’Œ <code>readObject(ObjectInputStream s)</code> å¾—åˆ°[åºåˆ—åŒ–å¦‚ä½•å®ç°](#ArrayList åºåˆ—åŒ–ä¸ååºåˆ—åŒ–)</li>
<li>æ³¨æ„åˆ° <code>MAX_ARRAY_SIZE</code> æ•°ç»„æœ€å¤§é•¿åº¦æ˜¯ <code>Integer.MAX_VALUE - 8</code>ï¼Œ[ä¸‹é¢è¯´æ˜](#MAX_ARRAY_SIZE æ•°å€¼è¯´æ˜)</li>
</ul>
<h4 id="ArrayList-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"><a href="#ArrayList-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–" class="headerlink" title="ArrayList åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"></a>ArrayList åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h4><ul>
<li><code>private void writeObject(java.io.ObjectOutputStream s)</code> åºåˆ—åŒ–<ul>
<li>åºåˆ—åŒ–å†™å…¥åˆ°æµä¸­æœ‰ï¼š<code>size</code> &amp; <code>elementå…ƒç´ å€¼</code> </li>
<li><code>elementData[]</code> åªåšç¼“å­˜æ•°ç»„ï¼Œé€šå¸¸ä¼šé¢„ç•™å®¹é‡ï¼Œä¸å¤Ÿæ‰æ‰©å®¹ï¼Œå› æ­¤åºåˆ—åŒ–åªå–æ•°ç»„ä¸­éœ€è¦çš„å…ƒç´ ï¼Œ<strong>èŠ‚çœç©ºé—´å’Œæ—¶é—´</strong>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeObject</span><span class="hljs-params">(java.io.ObjectOutputStream s)</span></span><br><span class="hljs-function">    <span class="hljs-keyword">throws</span> java.io.IOException</span>&#123;<br>    <span class="hljs-comment">// é¢„æœŸçš„ä¿®æ”¹æ¬¡æ•°ï¼Œç”¨äºåˆ¤æ–­å¹¶å‘ä¿®æ”¹çš„é—®é¢˜</span><br>    <span class="hljs-keyword">int</span> expectedModCount = modCount;<br>    s.defaultWriteObject();<br><br>    <span class="hljs-comment">// å†™å…¥ ArrayList size</span><br>    s.writeInt(size);<br><br>    <span class="hljs-comment">// å†™å…¥æ¯ä¸€ä¸ªå…ƒç´ å€¼</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        s.writeObject(elementData[i]);<br>    &#125;<br>	<span class="hljs-comment">// åˆ¤æ–­åºåˆ—åŒ–çš„å¹¶å‘é—®é¢˜</span><br>    <span class="hljs-keyword">if</span> (modCount != expectedModCount) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ConcurrentModificationException();<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li><code>private void readObject(java.io.ObjectInputStream s)</code> ååºåˆ—åŒ–<ul>
<li>å› ä¸ºæ„é€ æ­¤ <code>ArrayList</code> å·²ç»æœ‰æ¨¡æ¿å’Œæ•°æ®ã€Œåºåˆ—åŒ–ä¿å­˜çš„size&amp;elementã€æ‰€ä»¥ä½¿ç”¨ <code>EMPTY_ELEMENTDATA</code> ä½œä¸ºç©ºæ•°ç»„ï¼Œè€Œä¸æ˜¯ <code>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code></li>
<li>æ ¹æ® <code>size</code> è¯»å…¥å…ƒç´ æ•°æ®</li>
<li>æŒ‰åºåˆ—åŒ–æ­£ç¡®é¡ºåºå­˜å…¥å­˜å‚¨æ•°ç»„ä¸­</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readObject</span><span class="hljs-params">(java.io.ObjectInputStream s)</span></span><br><span class="hljs-function">    <span class="hljs-keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;<br>    <span class="hljs-comment">// è¿™é‡Œçš„ EMPTY_ELEMENTDATA å°±æ˜¯å­—æ®µä¸­çš„ç”¨äºç»™æœ‰å‚æ„é€ ç”¨çš„ç©ºæ•°ç»„</span><br>    elementData = EMPTY_ELEMENTDATA;<br><br>    <span class="hljs-comment">// æŒ‰ç…§ size è¯»å…¥æ•°æ®</span><br>    s.defaultReadObject();<br><br>    <span class="hljs-comment">// è¯»å–å®¹é‡</span><br>    s.readInt(); <span class="hljs-comment">// ignored</span><br><br>    <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// ä¸ clone() ç±»ä¼¼ï¼Œæ ¹æ®å¤§å°è€Œä¸æ˜¯å®¹é‡åˆ†é…é˜µåˆ—</span><br>        <span class="hljs-keyword">int</span> capacity = calculateCapacity(elementData, size);<br>        SharedSecrets.getJavaOISAccess().checkArray(s, Object[].class, capacity);<br>        ensureCapacityInternal(size);<br><br>        Object[] a = elementData;<br>        <span class="hljs-comment">// æŒ‰æ­£ç¡®é¡ºåºè¯»å…¥æ‰€æœ‰å…ƒç´ </span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>            a[i] = s.readObject();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="MAX-ARRAY-SIZE-æ•°å€¼è¯´æ˜"><a href="#MAX-ARRAY-SIZE-æ•°å€¼è¯´æ˜" class="headerlink" title="MAX_ARRAY_SIZE æ•°å€¼è¯´æ˜"></a>MAX_ARRAY_SIZE æ•°å€¼è¯´æ˜</h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * The maximum size of array to allocate.</span><br><span class="hljs-comment"> * Some VMs reserve some header words in an array.</span><br><span class="hljs-comment"> * Attempts to allocate larger arrays may result in</span><br><span class="hljs-comment"> * OutOfMemoryError: Requested array size exceeds VM limit</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAX_ARRAY_SIZE = Integer.MAX_VALUE - <span class="hljs-number">8</span>;<br></code></pre></div></td></tr></table></figure>
<p>å®˜æ–¹æ³¨é‡Šè§£é‡Šï¼Œæœ‰äº›è™šæ‹Ÿæœºä¼šä¿ç•™ä¸€äº›å­—æ®µç©ºé—´ï¼Œå¦‚æœç”¨æ»¡ <code>Integer.MAX_VALUE</code> <strong>å¯èƒ½</strong>ä¼š OOMã€‚</p>
<p>StackOverflow ä¸Šçš„éƒ¨åˆ†è§£é‡ŠæåŠåˆ°ã€Œå†…å­˜æ¨¡å‹é‡Œçš„<strong>å¯¹è±¡å¤´</strong>çš„ç»„æˆã€<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote">&lt;span class=â€hintâ€“top hintâ€“roundedâ€ aria-label=â€Why the maximum array size of ArrayList is Integer.MAX_VALUE - 8?</p>
<p>â€œ&gt;[1]</span></a></sup></p>
<p>äºæ˜¯å¯¹äº <strong>Javaæ•°ç»„å¯¹è±¡</strong> å‰–æ<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote">&lt;span class=â€hintâ€“top hintâ€“roundedâ€ aria-label=â€Anatomy of a Java array object</p>
<p>â€œ&gt;[2]</span></a></sup></p>
<p>IBMå®˜æ–¹è¯´åˆ°ã€Œä¸Javaå¯¹è±¡ç›¸æ¯”ï¼ŒåŒºåˆ«åœ¨äºæ•°ç»„å¯¹è±¡æœ‰ä¸€ä¸ªé¢å¤–çš„å…ƒæ•°æ®ï¼Œç”¨äºè¡¨ç¤º <strong>æ•°ç»„çš„å¤§å°</strong>ã€</p>
<p>å‰–æ <strong>Javaå¯¹è±¡</strong>  <sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote">&lt;span class=â€hintâ€“top hintâ€“roundedâ€ aria-label=â€Anatomy of a Java object</p>
<p>â€œ&gt;[3]</span></a></sup></p>
<p>ä¸åŒçš„JVMå‚å•†å¯¹å…ƒæ•°æ®æ•°é‡çš„è®¾è®¡æœ‰å·®å¼‚ï¼Œä½†é€šå¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Class</strong>ï¼šæŒ‡å‘ç±»ä¿¡æ¯çš„æŒ‡é’ˆï¼Œå³ç±»å‹æŒ‡é’ˆã€‚æŒ‡å‘æ–¹æ³•åŒºä¸­çš„ç±»å…ƒä¿¡æ¯ã€‚</li>
<li><strong>Flags</strong>ï¼šæè¿°å¯¹è±¡çŠ¶æ€çš„æ ‡å¿—é›†åˆï¼ŒåŒ…æ‹¬ hashcode å’Œ shapeã€Œå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„ã€</li>
<li><strong>Lock</strong>ï¼š å¯¹è±¡çš„åŒæ­¥ä¿¡æ¯ã€Œå½“å‰å¯¹è±¡æ˜¯å¦åŒæ­¥ã€</li>
</ul>
<p>è€Œ <strong>Javaæ•°ç»„å¯¹è±¡</strong> è¿˜å¤šä¸€ä¸ª <strong>Size</strong>ï¼Œå³æ•°ç»„çš„å¤§å°ã€‚</p>
<p>ã€Œ<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/35756277/why-the-maximum-array-size-of-arraylist-is-integer-max-value-8#:~:text=The%20size%20of%20object%20header%20can%20not%20exceed%208%20byte.">å¯¹è±¡å¤´çš„å¤§å°ä¸èƒ½è¶…è¿‡ 8 å­—èŠ‚</a>ã€</p>
<p><strong>æ ‡è®°å­— Mark Word</strong>ã€Œå“ˆå¸Œå€¼ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ã€åœ¨ 32 ä½æ¶æ„å  4 byteï¼Œ64 ä½æ¶æ„å  8 byteï¼›<strong>ç±»å‹æŒ‡é’ˆKlass pointer</strong> åœ¨ 32 ä¸ºæ¶æ„ä¸Šå…·æœ‰å­—é•¿ï¼Œä½†å¦‚æœå †åœ°å€å¯ä»¥ç”¨ 4 byte ç¼–ç ï¼Œåˆ™ä¾ç„¶å¯ä»¥å  4 byteã€‚</p>
<p>ğŸ“Œï¼šæ‰€ä»¥ä¸ºäº†ä¿é™©èµ·è§ã€Œé˜²æ­¢OOMã€ï¼Œæœ€å¤§æ•°ç»„é•¿åº¦è®¾ç½®ä¸º <code>Integer.MAX_VALUE - 8</code> </p>
<h3 id="â…¡ã€Constructor"><a href="#â…¡ã€Constructor" class="headerlink" title="â…¡ã€Constructor"></a>â…¡ã€Constructor</h3><h4 id="æ— å‚æ„é€ "><a href="#æ— å‚æ„é€ " class="headerlink" title="æ— å‚æ„é€ "></a>æ— å‚æ„é€ </h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ„é€ ä¸€ä¸ªåˆå§‹å®¹é‡ä¸º10çš„ç©ºåˆ—è¡¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ArrayList</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>è¿™é‡Œçš„åˆå§‹å®¹é‡ä¸º 10ï¼Œåœ¨å­—æ®µ <code>DEFAULT_CAPACITY = 10</code> ä½“ç°å‡ºæ¥çš„</li>
</ul>
<h4 id="æœ‰å‚æ„é€ "><a href="#æœ‰å‚æ„é€ " class="headerlink" title="æœ‰å‚æ„é€ "></a>æœ‰å‚æ„é€ </h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ArrayList</span><span class="hljs-params">(<span class="hljs-keyword">int</span> initialCapacity)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (initialCapacity &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">this</span>.elementData = <span class="hljs-keyword">new</span> Object[initialCapacity];<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (initialCapacity == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">this</span>.elementData = EMPTY_ELEMENTDATA;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;Illegal Capacity: &quot;</span>+<br>                                           initialCapacity);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>æ„é€ ä¸€ä¸ªå…·æœ‰æŒ‡å®šåˆå§‹å®¹é‡çš„ç©ºåˆ—è¡¨</li>
<li>å¦‚æœå…¥å‚ä¸ºè´Ÿæ•°ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ArrayList</span><span class="hljs-params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;<br>    <span class="hljs-comment">// æŒ‰æ­£ç¡®é¡ºåºåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„</span><br>    Object[] a = c.toArray();<br>    <span class="hljs-comment">// å…ˆæ›´æ–° size å€¼ï¼Œå†åˆ¤æ–­ã€‚å¦‚æœæ˜¯ç©ºæ•°ç»„åˆ™ç›´æ¥ä½¿ç”¨é»˜è®¤ç©ºæ•°ç»„</span><br>    <span class="hljs-keyword">if</span> ((size = a.length) != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// åˆ¤æ–­ c é›†åˆæ˜¯ä¸æ˜¯ArrayListï¼Œæ˜¯åˆ™ç›´æ¥èµ‹å€¼</span><br>        <span class="hljs-keyword">if</span> (c.getClass() == ArrayList.class) &#123;<br>            elementData = a;<br>        &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// å¦åˆ™æ‰‹åŠ¨æ‹·è´ä¸€ä»½ Object[]</span><br>            elementData = Arrays.copyOf(a, size, Object[].class);<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// replace with empty array.</span><br>        elementData = EMPTY_ELEMENTDATA;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>æŒ‰ç…§é›†åˆè¿­ä»£å™¨è¿”å›çš„é¡ºåºï¼Œæ„é€ åŒ…å«æŒ‡å®šé›†åˆå…ƒç´ çš„åˆ—è¡¨ã€‚å³ä¼ å…¥ä¸€ä¸ªé›†åˆç±»</li>
<li>ä¼ å…¥ null åˆ™æŠ›å‡º <code>NullPointerException</code> </li>
</ul>
<h3 id="â…¢ã€Method"><a href="#â…¢ã€Method" class="headerlink" title="â…¢ã€Method"></a>â…¢ã€Method</h3><h4 id="å¢æ·»å…ƒç´ -add-E-e"><a href="#å¢æ·»å…ƒç´ -add-E-e" class="headerlink" title="å¢æ·»å…ƒç´  add(E e)"></a>å¢æ·»å…ƒç´  add(E e)</h4><ul>
<li>æ·»åŠ å…ƒç´  e</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>&#123;<br>    ensureCapacityInternal(size + <span class="hljs-number">1</span>);  <span class="hljs-comment">// Increments modCount!!</span><br>    elementData[size++] = e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li><p><code>ensureCapacityInternal(int minCapacity)</code> <a href="#%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6">æ£€æŸ¥æ˜¯å¦æ‰©å®¹</a>ï¼Œç¡®ä¿å®¹é‡<strong>è‡³å°‘</strong>è¾¾åˆ° <code>size + 1</code>ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒmodCount ä¼šå¢åŠ ï¼Œå› ä¸ºæ‰©å®¹å±äºä¿®æ”¹æ“ä½œã€‚</p>
</li>
<li><p>ç¡®ä¿å®¹é‡å¤Ÿåï¼Œå°†å€¼å­˜å…¥æ•°ç»„ã€Œ<strong>elementData</strong>ã€åŒæ—¶ <code>size ++</code></p>
</li>
</ul>
<h4 id="æ·»åŠ å…ƒç´ -add-int-index-E-element"><a href="#æ·»åŠ å…ƒç´ -add-int-index-E-element" class="headerlink" title="æ·»åŠ å…ƒç´  add(int index, E element)"></a>æ·»åŠ å…ƒç´  add(int index, E element)</h4><ul>
<li>åœ¨æŒ‡å®š index ä½ç½®æ’å…¥å…ƒç´ ï¼Œå…¶åçš„å…ƒç´ éƒ½å‘å³ç§»åŠ¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, E element)</span> </span>&#123;<br>    rangeCheckForAdd(index);<br><br>    ensureCapacityInternal(size + <span class="hljs-number">1</span>);  <span class="hljs-comment">// Increments modCount!!</span><br>    System.arraycopy(elementData, index, elementData, index + <span class="hljs-number">1</span>,<br>                     size - index);<br>    elementData[index] = element;<br>    size++;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rangeCheckForAdd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (index &gt; size || index &lt; <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IndexOutOfBoundsException(outOfBoundsMsg(index));<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>å…ˆæ£€æŸ¥ index çš„åˆæ³•æ€§</li>
<li><a href="#%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6">æ£€æŸ¥æ˜¯å¦æ‰©å®¹</a>ï¼Œç¡®ä¿å®¹é‡<strong>è‡³å°‘</strong>è¾¾åˆ° <code>size + 1</code>ï¼ŒæœŸé—´ modCount å¢åŠ </li>
<li>[index, size] çš„å…ƒç´ å‘åç§»åŠ¨ä¸€ä¸ªå•ä½</li>
<li>æ’å…¥å…ƒç´ ï¼Œæ›´æ–° size å€¼</li>
</ul>
<h4 id="åˆ é™¤-remove-int-index"><a href="#åˆ é™¤-remove-int-index" class="headerlink" title="åˆ é™¤ remove(int index)"></a>åˆ é™¤ remove(int index)</h4><ul>
<li>åˆ é™¤ä¸‹æ ‡ä¸º index çš„å…ƒç´ </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">remove</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    rangeCheck(index);<br><br>    modCount++;<br>    E oldValue = elementData(index);<br><br>    <span class="hljs-keyword">int</span> numMoved = size - index - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (numMoved &gt; <span class="hljs-number">0</span>)<br>        System.arraycopy(elementData, index + <span class="hljs-number">1</span>, elementData, index,<br>                         numMoved);<br>    elementData[--size] = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// æ–¹ä¾¿ GC</span><br><br>    <span class="hljs-keyword">return</span> oldValue;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// ä¸Šè¿°ä½¿ç”¨åˆ°çš„æ–¹æ³•å®ç°</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rangeCheck</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (index &gt;= size)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IndexOutOfBoundsException(outOfBoundsMsg(index));<br>&#125;<br><span class="hljs-function">E <span class="hljs-title">elementData</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (E) elementData[index];<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>æ£€æŸ¥ index åˆæ³•æ€§ï¼Œä¿®æ”¹è®¡æ•°å™¨ modCount ++</li>
<li>è·å–æ—§å…ƒç´ ï¼Œä½œä¸ºæ–¹æ³•è¿”å›å€¼</li>
<li>è®¡ç®—éœ€è¦è¿˜åŸçš„åé¢çš„å…ƒç´ ä¸ªæ•°ä¸º <code>size - index - 1</code></li>
<li>åé¢çš„å…ƒç´ å…¨éƒ¨å‘å‰ç§»åŠ¨ä¸€ä¸ªå•ä½ï¼Œæ—§å…ƒç´ è¢«<strong>è¦†ç›–</strong></li>
<li>åˆ é™¤æ“ä½œå‰æ•°ç»„çš„æœ€åä¸€ä½ç½®ç©ºï¼Œæ–¹ä¾¿ GC</li>
</ul>
<h4 id="åˆ é™¤-remove-Object-o"><a href="#åˆ é™¤-remove-Object-o" class="headerlink" title="åˆ é™¤ remove(Object o)"></a>åˆ é™¤ remove(Object o)</h4><ul>
<li>åˆ é™¤æŒ‡å®šå…ƒç´  o</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">remove</span><span class="hljs-params">(Object o)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>; index &lt; size; index++)<br>            <span class="hljs-keyword">if</span> (elementData[index] == <span class="hljs-keyword">null</span>) &#123;<br>                fastRemove(index);<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>            &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>; index &lt; size; index++)<br>            <span class="hljs-keyword">if</span> (o.equals(elementData[index])) &#123;<br>                fastRemove(index);<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>            &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// æ²¡æœ‰è¿”å›å€¼çš„ remove(int index)</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fastRemove</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    modCount++;<br>    <span class="hljs-keyword">int</span> numMoved = size - index - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (numMoved &gt; <span class="hljs-number">0</span>)<br>        System.arraycopy(elementData, index+<span class="hljs-number">1</span>, elementData, index,<br>                         numMoved);<br>    elementData[--size] = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// æ–¹ä¾¿ GC</span><br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>ç®€å•çš„ for - loop æ‰¾å€¼ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ‰¾åˆ°å­˜å‚¨è¿›å»çš„ null å€¼ã€Œéæ‰©å®¹éƒ¨åˆ†çš„ nullã€æ¡ä»¶æ˜¯ <code>index &lt; size</code> </li>
</ul>
<h4 id="åˆ é™¤-clear"><a href="#åˆ é™¤-clear" class="headerlink" title="åˆ é™¤ clear()"></a>åˆ é™¤ clear()</h4><ul>
<li>æ¸…ç©ºæ‰€æœ‰å…ƒç´ å€¼</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span> </span>&#123;<br>    modCount++;<br>    <span class="hljs-comment">// æ–¹ä¾¿ GC</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++)<br>        elementData[i] = <span class="hljs-keyword">null</span>;<br>    size = <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>ä¿®æ”¹è®¡æ•°å™¨è‡ªå¢ï¼›å…ƒç´ ç½®ç©ºï¼Œä¾¿äºGCï¼›æœ€åä¿®æ”¹ size</li>
</ul>
<h4 id="ä¿®æ”¹-set-int-index-E-element"><a href="#ä¿®æ”¹-set-int-index-E-element" class="headerlink" title="ä¿®æ”¹ set(int index, E element)"></a>ä¿®æ”¹ set(int index, E element)</h4><ul>
<li>å°† index ä½ç½®çš„å…ƒç´ å€¼ä¿®æ”¹ä¸º element</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">set</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, E element)</span> </span>&#123;<br>    rangeCheck(index);<br><br>    E oldValue = elementData(index);<br>    elementData[index] = element;<br>    <span class="hljs-keyword">return</span> oldValue;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>å…ˆæ£€æŸ¥ index çš„åˆæ³•æ€§</li>
<li>è·å–æ—§å€¼ï¼›ä¿®æ”¹</li>
<li>è¿”å›æ—§å€¼</li>
</ul>
<h4 id="æŸ¥æ‰¾-get-int-index"><a href="#æŸ¥æ‰¾-get-int-index" class="headerlink" title="æŸ¥æ‰¾ get(int index)"></a>æŸ¥æ‰¾ get(int index)</h4><ul>
<li>æŸ¥æ‰¾å¹¶è¿”å› index ä½ç½®çš„å€¼</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    rangeCheck(index);<br><br>    <span class="hljs-keyword">return</span> elementData(index);<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æ‰©å®¹æœºåˆ¶"><a href="#æ‰©å®¹æœºåˆ¶" class="headerlink" title="æ‰©å®¹æœºåˆ¶"></a>æ‰©å®¹æœºåˆ¶</h4><ul>
<li>ç¡®ä¿å­˜å‚¨æ•°ç»„çš„å®¹é‡<strong>è‡³å°‘</strong>è¾¾åˆ° <code>minCapacity</code> çš„å¤§å°</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ensureCapacityInternal</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;<br>    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));<br>&#125;<br></code></pre></div></td></tr></table></figure>


<ul>
<li>è®¡ç®—<strong>é¢„æœŸ</strong>æ•°ç»„å®¹é‡<ul>
<li><code>elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code> åˆ¤æ–­å½“å‰æ•°ç»„æ˜¯ä¸æ˜¯<strong>æ— å‚æ„é€ </strong>åˆ›é€ å‡ºæ¥çš„<strong>å®¹é‡ä¸º0</strong>çš„æ•°ç»„</li>
<li>å¦‚æœæ˜¯ï¼Œåˆ™è®¡ç®—å‡ºæ¥çš„æ•°ç»„å®¹é‡å³ä¸º <code>size + 1</code>ï¼Œå³ <code>0 + 1</code>ï¼Œå› ä¸ºé»˜è®¤ç©ºæ•°ç»„size == 0</li>
<li>å¦åˆ™ç›´æ¥è¿”å› minCapacityï¼Œå³ä¼ è¿›æ¥çš„ [size + 1](#å¢æ·»å…ƒç´  add(E e))</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">calculateCapacity</span><span class="hljs-params">(Object[] elementData, <span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;<br>        <span class="hljs-keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);<br>    &#125;<br>    <span class="hljs-keyword">return</span> minCapacity;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>ğŸ“ŒQï¼šif è¯­å¥è¿”å›çš„ä¸€ç›´éƒ½æ˜¯ <code>minCapacity</code>ã€Œå› ä¸ºæ­£æ•°minCapacity &gt; DEFAULT_CAPACITY (0)ã€ï¼Œè€Œ if è¯­å¥å¤–ä¹Ÿæ˜¯è¿”å› <code>minCapacity</code>ã€‚è®¾è®¡æ„ä¹‰åœ¨å“ªï¼Ÿ</p>
<p>Aï¼šå‡è®¾ä¼ å…¥çš„ <code>minCapacity</code> æ˜¯è´Ÿæ•°ï¼Œå³ add() ä¸­çš„ <code>size + 1</code> ä»ä¸ºè´Ÿæ•°ï¼Œåˆ™ä¼šè¿”å› <code>DEFAULT_CAPACITY</code> AKA <strong>10</strong>ï¼Œå³æ— å‚æ„é€ é»˜è®¤åˆ›å»ºå®¹é‡ä¸º <strong>10</strong> çš„æ•°ç»„ï¼Œæ‰€ä»¥è¿™ä¹ˆè®¾è®¡å¯ä»¥è§£å†³éæ³•å…¥å‚ã€‚</p>
<p>Qï¼šä¸ºä»€ä¹ˆè¦åˆ¤æ–­ã€ŒelementDataã€æ˜¯å¦æ˜¯ é»˜è®¤ç©ºæ•°ç»„<code>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code></p>
<p>Aï¼šå…¶å®æ­¤ if è¯­å¥åªæœ‰ç¬¬ä¸€æ¬¡æ‰©å®¹ä¼šä½¿ç”¨åˆ°ï¼ŒçœŸæ­£çš„æ‰©å®¹ <code>grow()</code> åœ¨æ¯ä¸€æ¬¡æ‰©å®¹éƒ½ä¼šåˆ›å»ºå‡ºæ–°çš„æ•°ç»„è¦†ç›–æ‰ <code>elementData</code>ï¼Œæ‰©å®¹ä¹‹åè‚¯å®šå°±èƒ½ç¡®ä¿å…¥å‚ <code>minCapacity</code> æ˜¯æ­£æ•°ï¼ˆ[size + 1](#å¢æ·»å…ƒç´  add(E e))ï¼‰ï¼Œä¸éœ€è¦å†åˆ¤æ–­ã€‚</p>
<ul>
<li>ç¡®ä¿æ˜ç¡®çš„å®¹é‡ï¼Œåšæ‰©å®¹å‰çš„æœ€åä¸€æ¬¡ç¡®è®¤<ul>
<li>ä¿®æ”¹è®¡æ•°å™¨è‡ªå¢</li>
<li>åˆ¤æ–­åˆšæ‰è®¡ç®—çš„<strong>é¢„æœŸ</strong>æ•°ç»„å®¹é‡ æ˜¯å¦å¤§äº å½“å‰æ•°ç»„å®¹é‡</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ensureExplicitCapacity</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;<br>    modCount++;<br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-keyword">if</span> (minCapacity - elementData.length &gt; <span class="hljs-number">0</span>)<br>        grow(minCapacity);<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>ğŸ“Œå®˜æ–¹åœ¨æ¡ä»¶åˆ¤æ–­è¿™é‡Œæ³¨è§£äº† æº¢å‡ºè­¦å‘Šã€Œoverflow-consciousã€ï¼Œè¿™é‡Œæ¶‰åŠåˆ° <code>a &lt; b</code> ä¸ <code>a - b &lt; 0</code> åŒºåˆ«çš„é—®é¢˜ï¼Œ[ä¸‹æ–‡è¯´æ˜](#å…³äº a &lt; b ä¸ a - b &lt; 0 åº”ç”¨è¯´æ˜)ã€‚</p>
<ul>
<li>æ‰©å®¹æ“ä½œ<ul>
<li>è·å–æ—§å®¹é‡ï¼Œæ ¹æ®æ—§å®¹é‡çš„ <strong>1.5</strong> å€å¤§å°ä½œä¸ºæ–°å®¹é‡ï¼Œä½¿ç”¨<strong>ä½è¿ç®—</strong>æé«˜æ•ˆç‡ã€‚</li>
<li>ä¸¤ä¸ªç‰¹æ®Šåˆ¤æ–­åï¼Œè¿›è¡Œæ‰©å®¹ï¼Œä½¿ç”¨çš„æ˜¯ <code>Arrays.copyOf</code> æ‰©å®¹ï¼Œè¿™ä¼šåˆ›å»ºå‡º<strong>æ–°æ•°ç»„</strong>è¦†ç›–åŸæ•°ç»„</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">grow</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;<br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-keyword">int</span> oldCapacity = elementData.length;<br>    <span class="hljs-keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="hljs-number">1</span>); <span class="hljs-comment">// AKA 1.5å€æ‰©å®¹</span><br>    <span class="hljs-comment">// åªæœ‰ç¬¬ä¸€æ¬¡æ‰ä¼š true ä¿®æ”¹æ–°å®¹é‡</span><br>    <span class="hljs-keyword">if</span> (newCapacity - minCapacity &lt; <span class="hljs-number">0</span>)<br>        newCapacity = minCapacity;<br>    <span class="hljs-comment">// å¦‚æœæ–°å®¹é‡å¤ªå¤§ï¼Œåˆ™æŒ‰ç…§å¤§å®¹é‡å¤„ç†æ–¹å¼</span><br>    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>)<br>        newCapacity = hugeCapacity(minCapacity);<br>    <span class="hljs-comment">// minCapacity is usually close to size, so this is a win:</span><br>    elementData = Arrays.copyOf(elementData, newCapacity);<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>ğŸ“ŒQï¼šç¬¬ä¸€ä¸ªæ¡ä»¶ <code>newCapacity &lt; minCapacity</code> åˆ¤æ–­å¥‡æ€ªï¼Œæ–°å®¹é‡ä¸ºä»€ä¹ˆä¼šæ¯”é¢„æµ‹å®¹é‡å°ã€‚é¢„æµ‹å®¹é‡æ˜¯ <code>size + 1</code>ï¼Œå³æ‰€æœ‰æ•°æ®é•¿åº¦ + 1ï¼Œè€Œæ–°å®¹é‡æ˜¯åœ¨åŸå®¹é‡åŸºç¡€ä¸Šæ‰©å¤§ 1.5 å€ï¼Œè‚¯å®šæ¯” <code>minCapacity</code> è¦å¤§ã€‚</p>
<p>Aï¼šåœ¨æ— å‚æ„é€ åˆ›å»ºç©ºæ•°ç»„æ—¶ï¼Œ<code>oldCapacity</code> åŸå®¹é‡ä¸º 0ï¼Œ<strong>æ‰©å¤§ 1.5 å€ä»ç„¶ä¸º 0</strong>ã€‚æ­¤æ—¶æ–°å®¹é‡è‡ªç„¶æ¯”é¢„æµ‹å®¹é‡è¦å°ï¼Œå°†å€¼ä¸º0çš„ <code>newCapacity</code> æ›´æ–°ä¸º é¢„æµ‹å®¹é‡ã€‚è€Œåœ¨æ­¤ä¹‹åï¼Œè¿™ä¸€æ›´æ–°æ“ä½œéƒ½ä¸ä¼šè¿›è¡Œï¼Œå› ä¸ºæ‰©å®¹å®¹é‡è‚¯å®šæ¯”é¢„æµ‹å®¹é‡å¤§ã€Œ(x1.5) &gt; (+ 1)ã€ã€‚</p>
<ul>
<li>å¤§å®¹é‡å¤„ç†æ–¹å¼<ul>
<li>int å‹ä¸€ç›´ç´¯åŠ åˆ°è´Ÿæ•°ï¼Œè¯´æ˜å·²ç»è¶…å‡º int å­˜å‚¨çš„æœ€å¤§å€¼äº†ï¼ŒæŠ›å¼‚å¸¸</li>
<li>é¢„æµ‹å®¹é‡ &gt;  å…è®¸çš„æœ€å¤§å®¹é‡ï¼Œåˆ™è®©æ–°å®¹é‡ä¸º int æœ€å¤§å€¼ï¼Œå¦åˆ™ä¸º <code>MAX_ARRAY_SIZE</code>ï¼Œå³ <code>Integer.MAX_VALUE - 8</code>ï¼Œç›¸å½“äºç»™ä¸€ä¸ªç¨³å¦¥çš„å€¼ï¼Œ[ä¸è‡³äºOOM](#MAX_ARRAY_SIZE æ•°å€¼è¯´æ˜)ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hugeCapacity</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (minCapacity &lt; <span class="hljs-number">0</span>) <span class="hljs-comment">// overflow</span><br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> OutOfMemoryError();<br>    <span class="hljs-keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?<br>        Integer.MAX_VALUE :<br>        MAX_ARRAY_SIZE;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<ul>
<li>Arrays å·¥å…·ç±»æ‰©å®¹<ul>
<li>æœ€ç»ˆéƒ½ä¼šè°ƒç”¨æœ¬åœ°æ–¹æ³• <code>arraycopy()</code> è¿›è¡Œæ‰©å®¹</li>
<li>å¯ä»¥çœ‹åˆ°ï¼Œè¿”å›çš„ <code>copy</code> æ•°ç»„éƒ½æ˜¯ new å‡ºæ¥çš„ï¼Œæ‰€ä»¥æ‰©å®¹ä¼šè®©å­˜å‚¨æ•°ç»„å˜æˆä¸åŒå¯¹è±¡</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T[] copyOf(T[] original, <span class="hljs-keyword">int</span> newLength) &#123;<br>    <span class="hljs-keyword">return</span> (T[]) copyOf(original, newLength, original.getClass());<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T,U&gt; T[] copyOf(U[] original, <span class="hljs-keyword">int</span> newLength, Class&lt;? extends T[]&gt; newType) &#123;<br>    T[] copy = ((Object)newType == (Object)Object[].class)<br>        ? (T[]) <span class="hljs-keyword">new</span> Object[newLength]<br>        : (T[]) Array.newInstance(newType.getComponentType(), newLength);<br>    System.arraycopy(original, <span class="hljs-number">0</span>, copy, <span class="hljs-number">0</span>,<br>                     Math.min(original.length, newLength));<br>    <span class="hljs-keyword">return</span> copy;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">arraycopy</span><span class="hljs-params">(Object src,  <span class="hljs-keyword">int</span>  srcPos,</span></span><br><span class="hljs-function"><span class="hljs-params">                                        Object dest, <span class="hljs-keyword">int</span> destPos,</span></span><br><span class="hljs-function"><span class="hljs-params">                                        <span class="hljs-keyword">int</span> length)</span></span>;<br></code></pre></div></td></tr></table></figure>


<h3 id="å…³äº-a-lt-b-ä¸-a-b-lt-0-åº”ç”¨è¯´æ˜"><a href="#å…³äº-a-lt-b-ä¸-a-b-lt-0-åº”ç”¨è¯´æ˜" class="headerlink" title="å…³äº a &lt; b ä¸ a - b &lt; 0 åº”ç”¨è¯´æ˜"></a>å…³äº a &lt; b ä¸ a - b &lt; 0 åº”ç”¨è¯´æ˜</h3><p>Qï¼šçœ‹åˆ°ä¸Šè¿°æ‰©å®¹çš„å¾ˆå¤šæ¡ä»¶åˆ¤æ–­ä½¿ç”¨çš„éƒ½æ˜¯ <code>a - b &lt; 0</code> çš„å½¢å¼ï¼Œè€Œä¸æ˜¯ç›´æ¥æ¯”è¾ƒï¼Œè¿™ç§è®¾è®¡çš„å¥½å¤„åœ¨å“ªï¼Ÿ</p>
<p>åœ¨æ•°å­¦ä¸­ï¼Œè¿™ä¸¤ä¸ªä¸ç­‰å¼æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚ä½†åœ¨è®¡ç®—æœºä¸­ï¼Œéœ€è¦è€ƒè™‘åˆ°å­˜å‚¨çš„é—®é¢˜ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°å˜é‡ <code>a | b</code> å‡ºç°</p>
<p><strong>æº¢å‡º</strong>çš„æƒ…å†µã€‚</p>
<p>ğŸŒ°Demo <sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Difference between if (a - b &lt; 0) and if (a &lt; b)]
">[4]</span></a></sup>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">int</span> a = Integer.MAX_VALUE;<br><span class="hljs-keyword">int</span> b = Integer.MIN_VALUE;<br><span class="hljs-keyword">if</span> (a &lt; b) System.out.println(<span class="hljs-string">&quot;a &lt; b&quot;</span>);<br><span class="hljs-keyword">if</span> (a - b &lt; <span class="hljs-number">0</span>) System.out.println(<span class="hljs-string">&quot;a - b &lt; 0&quot;</span>);<br></code></pre></div></td></tr></table></figure>
<blockquote>
<p>ç»“æœï¼ša - b &lt; 0</p>
</blockquote>
<ul>
<li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œa è‚¯å®šå°äº b</li>
<li>ä½†æ˜¯ç»“æœæ˜¯ <code>a - b &lt; 0</code> ä¸º trueï¼Œå³ a &lt; b</li>
</ul>
<p>åˆ†æï¼š<code>a - b</code> è¶…å‡º int å­˜å‚¨æœ€å¤§èŒƒå›´ï¼Œäºæ˜¯<strong>æº¢å‡º</strong>ï¼Œå˜æˆè´Ÿæ•°</p>
<p>ArrayList å‰çš„åˆ¤æ–­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// overflow-conscious code</span><br><span class="hljs-keyword">if</span> (minCapacity - elementData.length &gt; <span class="hljs-number">0</span>)<br>    grow(minCapacity);<br></code></pre></div></td></tr></table></figure>
<p>å®˜æ–¹ä¹Ÿæå‡º æº¢å‡ºè­¦å‘Š</p>
<ul>
<li><p>ä½¿ç”¨ <code>a &lt; b</code> å½¢å¼</p>
<ul>
<li>å¦‚æœ <code>minCapacity</code> è¿‡å¤§ï¼Œæº¢å‡ºå˜æˆè´Ÿæ•°ï¼Œæ­¤æ—¶ä¸ä¼šæ‰©å®¹ï¼Œç„¶è€Œæ­¤æƒ…å†µæ˜¯æœ‰æ‰©å®¹éœ€æ±‚çš„</li>
</ul>
</li>
<li><p>ä½¿ç”¨ <code>a - b &lt; 0</code> å½¢å¼</p>
<ul>
<li>å¦‚æœ <code>minCapacity</code> è¿‡å¤§ï¼Œæº¢å‡ºä¸ºè´Ÿæ•°ï¼Œè€Œå‡å»ä¸€ä¸ªæ­£æ•°åˆä¼šå›åˆ°æ­£æ•°ï¼Œæ­¤æ—¶å°±ä¼šé¡ºåˆ©è¿›å…¥æ‰©å®¹ä¸­</li>
</ul>
</li>
</ul>
<p><code>grow()</code> :</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// overflow-conscious code</span><br><span class="hljs-keyword">int</span> oldCapacity = elementData.length;<br><span class="hljs-keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="hljs-number">1</span>);<br><span class="hljs-keyword">if</span> (newCapacity - minCapacity &lt; <span class="hljs-number">0</span>)<br>    newCapacity = minCapacity;<br><span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>)<br>    newCapacity = hugeCapacity(minCapacity);<br></code></pre></div></td></tr></table></figure>
<p>åŒæ ·ä¹Ÿæœ‰æº¢å‡ºè­¦å‘Š</p>
<ul>
<li>ä½¿ç”¨ <code>a &lt; b</code> å½¢å¼<ul>
<li><code>newCapacity</code> å¦‚æœæ‰©å®¹ 1.5 å€åå¤ªå¤§æº¢å‡ºä¸ºè´Ÿæ•°ï¼Œåˆ™ä¼šå°äº <code>minCapacity</code>ï¼Œä¼šæ›´æ–° <code>newCapacity = minCapacity;</code> </li>
<li>ä¸‹ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œ<code>newCapacity</code> ä¸ºè´Ÿæ•° ä¼šå°äº <code>MAX_ARRAY_SIZE</code>ï¼Œæ‰€ä»¥ä¸ä¼šè¿›è¡Œ è¶…å¤§å®¹é‡å¤„ç†ï¼Œåˆ™ä¼šå‡ºç°é—®é¢˜</li>
</ul>
</li>
<li>ä½¿ç”¨ <code>a - b &lt; 0</code> å½¢å¼<ul>
<li>ç¬¬ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œæº¢å‡ºä¸ºè´Ÿæ•°çš„ <code>newCapacity</code>ï¼Œå‡å»æ­£æ•° <code>minCapacity</code> ç»“æœå¤§äº 0ï¼Œä¸æ›´æ–° <code>newCapacity</code>ï¼Œå³åªæœ‰ç¬¬ä¸€æ¬¡æ‰©å®¹ã€Œç©ºæ•°ç»„ã€ä¼šæ›´æ–°</li>
<li>ç¬¬äºŒä¸ªæ¡ä»¶åˆ¤æ–­ï¼ŒåŒç†ï¼Œä¼šæ‰§è¡Œè¶…å¤§å®¹é‡å¤„ç†ï¼Œåˆä¹é€»è¾‘ã€‚</li>
</ul>
</li>
</ul>
<h2 id="ä¸‰ã€Vector"><a href="#ä¸‰ã€Vector" class="headerlink" title="ä¸‰ã€Vector"></a>ä¸‰ã€Vector</h2><ul>
<li>å› ä¸ºæ–¹æ³•ä¸ŠåŠ äº† <code>synchronized</code>ï¼Œæ˜¯æ–¹æ³•çº§çš„é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>
<li>å¤§éƒ¨åˆ†é€»è¾‘å’Œè®¾è®¡ä¸ <code>ArrayList</code> ç›¸åŒ</li>
</ul>
<h3 id="â… ã€Field-1"><a href="#â… ã€Field-1" class="headerlink" title="â… ã€Field"></a>â… ã€Field</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// å­˜å‚¨æ•°ç»„</span><br><span class="hljs-keyword">protected</span> Object[] elementData;<br><span class="hljs-comment">// çœŸå®å…ƒç´ çš„æ•°é‡</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span> elementCount;<br><span class="hljs-comment">// æ‰©å®¹å› å­ï¼Œè¯¦ç»†ä½œç”¨è§æ‰©å®¹å‡½æ•°</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span> capacityIncrement;<br></code></pre></div></td></tr></table></figure>


<h3 id="â…¡ã€Constructor-1"><a href="#â…¡ã€Constructor-1" class="headerlink" title="â…¡ã€Constructor"></a>â…¡ã€Constructor</h3><h4 id="æ— å‚æ„é€ -1"><a href="#æ— å‚æ„é€ -1" class="headerlink" title="æ— å‚æ„é€ "></a>æ— å‚æ„é€ </h4><ul>
<li>æ— å‚æ„é€ é»˜è®¤çš„æ•°ç»„é•¿åº¦æ˜¯ <strong>10</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Vector</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>(<span class="hljs-number">10</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æœ‰å‚æ„é€ -1"><a href="#æœ‰å‚æ„é€ -1" class="headerlink" title="æœ‰å‚æ„é€ "></a>æœ‰å‚æ„é€ </h4><ul>
<li>è‡ªå®šä¹‰æ•°ç»„é•¿åº¦ï¼Œé»˜è®¤çš„æ‰©å®¹å› å­æ˜¯ <strong>0</strong>ï¼Œå³æ‰©å®¹æ˜¯ <strong>2</strong> å€æ‰©å®¹</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Vector</span><span class="hljs-params">(<span class="hljs-keyword">int</span> initialCapacity)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>(initialCapacity, <span class="hljs-number">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>


<ul>
<li>è‡ªå®šä¹‰æ•°ç»„é•¿åº¦ &amp; æ‰©å®¹å› å­</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Vector</span><span class="hljs-params">(<span class="hljs-keyword">int</span> initialCapacity, <span class="hljs-keyword">int</span> capacityIncrement)</span> </span>&#123;<br>    <span class="hljs-keyword">super</span>();<br>    <span class="hljs-keyword">if</span> (initialCapacity &lt; <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;Illegal Capacity: &quot;</span>+<br>                                           initialCapacity);<br>    <span class="hljs-keyword">this</span>.elementData = <span class="hljs-keyword">new</span> Object[initialCapacity];<br>    <span class="hljs-keyword">this</span>.capacityIncrement = capacityIncrement;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<ul>
<li>æŒ‰ç…§ä¼ å…¥çš„é›†åˆåˆå§‹åŒ–</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Vector</span><span class="hljs-params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;<br>    Object[] a = c.toArray();<br>    elementCount = a.length;<br>    <span class="hljs-keyword">if</span> (c.getClass() == ArrayList.class) &#123;<br>        elementData = a;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        elementData = Arrays.copyOf(a, elementCount, Object[].class);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="â…¢ã€Method-1"><a href="#â…¢ã€Method-1" class="headerlink" title="â…¢ã€Method"></a>â…¢ã€Method</h3><ul>
<li>å¤§éƒ¨åˆ†æ–¹æ³•éƒ½ä¸ <code>ArrayList</code> ç›¸åŒ</li>
</ul>
<h4 id="æ‰©å®¹æœºåˆ¶-1"><a href="#æ‰©å®¹æœºåˆ¶-1" class="headerlink" title="æ‰©å®¹æœºåˆ¶"></a>æ‰©å®¹æœºåˆ¶</h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>&#123;<br>    modCount++;<br>    ensureCapacityHelper(elementCount + <span class="hljs-number">1</span>);<br>    elementData[elementCount++] = e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>æ‰©å®¹å‰çš„æ£€æŸ¥</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ensureCapacityHelper</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;<br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-keyword">if</span> (minCapacity - elementData.length &gt; <span class="hljs-number">0</span>)<br>        grow(minCapacity);<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>ğŸ“Œæ‰©å®¹</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">grow</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;<br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-keyword">int</span> oldCapacity = elementData.length;<br>    <span class="hljs-keyword">int</span> newCapacity = oldCapacity + ((capacityIncrement &gt; <span class="hljs-number">0</span>) ?<br>                                     capacityIncrement : oldCapacity); <span class="hljs-comment">// æ‰©å®¹æœºåˆ¶</span><br>    <span class="hljs-keyword">if</span> (newCapacity - minCapacity &lt; <span class="hljs-number">0</span>)<br>        newCapacity = minCapacity;<br>    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>)<br>        newCapacity = hugeCapacity(minCapacity);<br>    elementData = Arrays.copyOf(elementData, newCapacity);<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><code>newCapacity</code> æ˜¯æ—§å®¹é‡ åŠ ä¸Šä¸€ä¸ªå€¼ï¼Œä¸‰ç›®è¿ç®—ç¬¦åˆ¤æ–­æ‰©å®¹å› å­æ˜¯å¤šå°‘ï¼Œå¦‚æœæ˜¯é»˜è®¤çš„ 0 æˆ–è€…å°äº 0ï¼Œåˆ™æ‰©å®¹ä¸¤å€ã€‚</p>
<p>å¦åˆ™æ‰©å®¹ <code>1 + capacityIncrement</code> å€</p>
<h2 id="å››ã€LinkedList"><a href="#å››ã€LinkedList" class="headerlink" title="å››ã€LinkedList"></a>å››ã€LinkedList</h2><ul>
<li>ä½¿ç”¨çš„æ•°æ®ç»“æ„æ˜¯ <strong>åŒå‘é“¾è¡¨</strong></li>
<li>ç»§æ‰¿äº† <code>List</code> å’Œ <code>Deque</code>ï¼Œæ‰€ä»¥å¯ä»¥å½“æˆåˆ—è¡¨é›†åˆ å’Œ åŒç«¯é˜Ÿåˆ—</li>
<li> éçº¿ç¨‹å®‰å…¨ï¼›ä½¿ä¹‹çº¿ç¨‹å®‰å…¨çš„åŠæ³•æ˜¯è°ƒç”¨ <code>Collections</code> å·¥å…·ç±»çš„ <code>synchronizedList(List&lt;T&gt; list)</code> æ–¹æ³•è½¬åŒ–æˆçº¿ç¨‹å®‰å…¨çš„é›†åˆ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">List list = Collections.synchronizedList(<span class="hljs-keyword">new</span> LinkedList(...));<br></code></pre></div></td></tr></table></figure>


<h3 id="â… ã€Field-2"><a href="#â… ã€Field-2" class="headerlink" title="â… ã€Field"></a>â… ã€Field</h3><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// èŠ‚ç‚¹ï¼ˆå…ƒç´ ï¼‰ä¸ªæ•°</span><br><span class="hljs-keyword">transient</span> <span class="hljs-keyword">int</span> size = <span class="hljs-number">0</span>;<br><span class="hljs-comment">// æŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</span><br><span class="hljs-keyword">transient</span> Node&lt;E&gt; first;<br><span class="hljs-comment">// æŒ‡å‘æœ«å°¾èŠ‚ç‚¹</span><br><span class="hljs-keyword">transient</span> Node&lt;E&gt; last;<br></code></pre></div></td></tr></table></figure>
<p>æ ¹æ®åŒå‘é“¾è¡¨å‚¨å­˜ç‰¹ç‚¹</p>
<p>åœ¨è¿è¡Œä¸­çš„ä¸å˜é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">(first == <span class="hljs-keyword">null</span> &amp;&amp; last == <span class="hljs-keyword">null</span>) || (first.prev == <span class="hljs-keyword">null</span> &amp;&amp; first.item != <span class="hljs-keyword">null</span>)<br>(first == <span class="hljs-keyword">null</span> &amp;&amp; last == <span class="hljs-keyword">null</span>) || (last.next == <span class="hljs-keyword">null</span> &amp;&amp; last.item != <span class="hljs-keyword">null</span>)<br></code></pre></div></td></tr></table></figure>


<h4 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h4><p><img src="https://gitee.com/hypocrite30/ImgBed/raw/master/img/JavaCommons/1628515716530-screenshot.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span>&lt;<span class="hljs-title">E</span>&gt; </span>&#123;<br>    E item;<br>    Node&lt;E&gt; next;<br>    Node&lt;E&gt; prev;<br><br>    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;<br>        <span class="hljs-keyword">this</span>.item = element;<br>        <span class="hljs-keyword">this</span>.next = next;<br>        <span class="hljs-keyword">this</span>.prev = prev;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>ç”±æ­¤å¯çœ‹å‡ºåº•å±‚æ•°æ®ç»“æ„æ˜¯ <strong>åŒå‘é“¾è¡¨</strong></li>
</ul>
<h3 id="â…¡ã€Constructor-2"><a href="#â…¡ã€Constructor-2" class="headerlink" title="â…¡ã€Constructor"></a>â…¡ã€Constructor</h3><h4 id="æ— å‚æ„é€ -2"><a href="#æ— å‚æ„é€ -2" class="headerlink" title="æ— å‚æ„é€ "></a>æ— å‚æ„é€ </h4><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// Constructs an empty list.</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LinkedList</span><span class="hljs-params">()</span> </span>&#123;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æœ‰å‚æ„é€ -2"><a href="#æœ‰å‚æ„é€ -2" class="headerlink" title="æœ‰å‚æ„é€ "></a>æœ‰å‚æ„é€ </h4><ul>
<li>å°†å…¥å‚é›†åˆå…ƒç´ æ·»åŠ è¿›æ–°çš„ <code>LinkedList</code> é›†åˆ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LinkedList</span><span class="hljs-params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>();<br>    addAll(c);<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="â…¢ã€Method-2"><a href="#â…¢ã€Method-2" class="headerlink" title="â…¢ã€Method"></a>â…¢ã€Method</h3><h4 id="æ·»åŠ -add-E-e"><a href="#æ·»åŠ -add-E-e" class="headerlink" title="æ·»åŠ  add(E e)"></a>æ·»åŠ  add(E e)</h4><ul>
<li>æ·»åŠ å…ƒç´ ï¼Œä½¿ç”¨[å°¾æ’æ³•](#å°¾æ’æ³•æ·»åŠ å…ƒç´  linkLast(E e))</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>&#123;<br>    linkLast(e);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æ·»åŠ -add-int-index-E-element"><a href="#æ·»åŠ -add-int-index-E-element" class="headerlink" title="æ·»åŠ  add(int index, E element)"></a>æ·»åŠ  add(int index, E element)</h4><ul>
<li>æ·»åŠ å…ƒç´ åˆ°æŒ‡å®šä¸‹æ ‡ä½ç½®<ul>
<li>æ£€æŸ¥ä¸‹æ ‡åˆæ³•æ€§</li>
<li>åˆ¤æ–­æ’å…¥ä½ç½®æ˜¯åœ¨æœ«å°¾ã€Œ[å°¾æ’](#å°¾æ’æ³•æ·»åŠ å…ƒç´  linkLast(E e))ã€è¿˜æ˜¯åœ¨ã€Œ[æ’å…¥éç©ºèŠ‚ç‚¹ä¹‹å‰](#æ’å…¥å…ƒç´ åˆ°éç©ºèŠ‚ç‚¹ä¹‹å‰ linkBefore(E e, Node<E> succ))ã€</li>
<li>ã€Œæ’å…¥éç©ºèŠ‚ç‚¹ä¹‹å‰ã€ç”¨åˆ° [node(int index)](#æ£€ç´¢èŠ‚ç‚¹åœ¨é“¾è¡¨çš„ä¸‹æ ‡ä½ç½® node(int index)) è®¡ç®—è¿”å›ä¸‹æ ‡ä½ç½®èŠ‚ç‚¹</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, E element)</span> </span>&#123;<br>    checkPositionIndex(index);<br><br>    <span class="hljs-keyword">if</span> (index == size)<br>        linkLast(element);<br>    <span class="hljs-keyword">else</span><br>        linkBefore(element, node(index));<br>&#125;<br></code></pre></div></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkPositionIndex</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!isPositionIndex(index))<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IndexOutOfBoundsException(outOfBoundsMsg(index));<br>&#125;<br><span class="hljs-comment">// æ£€æŸ¥ä¸‹æ ‡åˆæ³•æ€§ index âˆˆ [0, size]</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isPositionIndex</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> index &gt;= <span class="hljs-number">0</span> &amp;&amp; index &lt;= size;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æ·»åŠ -addFirst-E-e"><a href="#æ·»åŠ -addFirst-E-e" class="headerlink" title="æ·»åŠ  addFirst(E e)"></a>æ·»åŠ  addFirst(E e)</h4><ul>
<li>[æ’å…¥å…ƒç´ åˆ°é“¾è¡¨å¤´](#æ’å…¥å…ƒç´ åˆ°é“¾è¡¨å¤´ linkFirst(E e))</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addFirst</span><span class="hljs-params">(E e)</span> </span>&#123;<br>    linkFirst(e);<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æ·»åŠ -addLast-E-e"><a href="#æ·»åŠ -addLast-E-e" class="headerlink" title="æ·»åŠ  addLast(E e)"></a>æ·»åŠ  addLast(E e)</h4><ul>
<li>[æ’å…¥å…ƒç´ åˆ°é“¾è¡¨å°¾](#å°¾æ’æ³•æ·»åŠ å…ƒç´  linkLast(E e))</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addLast</span><span class="hljs-params">(E e)</span> </span>&#123;<br>    linkLast(e);<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="åˆ é™¤-remove-Object-o-1"><a href="#åˆ é™¤-remove-Object-o-1" class="headerlink" title="åˆ é™¤ remove(Object o)"></a>åˆ é™¤ remove(Object o)</h4><ul>
<li><p>åˆ é™¤æŒ‡å®šå…ƒç´ çš„<strong>ç¬¬ä¸€ä¸ª</strong>åŒ¹é…é¡¹</p>
<ul>
<li><strong>if</strong> å¾…åˆ é™¤å…ƒç´ ä¸º <code>null</code><ul>
<li>ä»å¤´æŸ¥æ‰¾ç¬¬ä¸€ä¸ª <code>null</code>ï¼Œä»é“¾è¡¨[æ–­å¼€èŠ‚ç‚¹](#åˆ é™¤èŠ‚ç‚¹ unlink(Node<E> x))</li>
</ul>
</li>
<li><strong>else</strong> å¾…åˆ é™¤å…ƒç´ ä¸ç©º<ul>
<li>ä»å¤´æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå€¼ç¬¦åˆçš„å…ƒç´ ï¼Œä»é“¾è¡¨[æ–­å¼€èŠ‚ç‚¹](#åˆ é™¤èŠ‚ç‚¹ unlink(Node<E> x))</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">remove</span><span class="hljs-params">(Object o)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">null</span>) &#123;<br>        <span class="hljs-keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="hljs-keyword">null</span>; x = x.next) &#123;<br>            <span class="hljs-keyword">if</span> (x.item == <span class="hljs-keyword">null</span>) &#123;<br>                unlink(x);<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="hljs-keyword">null</span>; x = x.next) &#123;<br>            <span class="hljs-keyword">if</span> (o.equals(x.item)) &#123;<br>                unlink(x);<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="å°¾æ’æ³•æ·»åŠ å…ƒç´ -linkLast-E-e"><a href="#å°¾æ’æ³•æ·»åŠ å…ƒç´ -linkLast-E-e" class="headerlink" title="å°¾æ’æ³•æ·»åŠ å…ƒç´  linkLast(E e)"></a>å°¾æ’æ³•æ·»åŠ å…ƒç´  linkLast(E e)</h4><ul>
<li><code>l</code> æŒ‡é’ˆæŒ‡å‘é“¾è¡¨å°¾éƒ¨ï¼Œç”¨äºæ ‡è®°<strong>åŸé“¾è¡¨å°¾</strong></li>
<li>æ ¹æ® <code>Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next)</code> åˆ›å»ºå€¼ä¸º <code>e</code>ï¼Œå‰é©±ä¸º <code>l</code> å³ <code>last</code>ï¼Œåç»§ä¸º <code>null</code> çš„èŠ‚ç‚¹ï¼Œè¿™ä¹ˆæ„é€ ç¬¦åˆ<strong>å°¾èŠ‚ç‚¹</strong>ç‰¹ç‚¹</li>
<li>é“¾è¡¨å°¾æŒ‡é’ˆç§»åŠ¨åˆ°æ–°é“¾è¡¨å°¾</li>
<li><strong>if</strong> åŸé“¾è¡¨å°¾æ˜¯ <code>null</code> <ul>
<li>è¯´æ˜ã€Œé“¾è¡¨ä¸ºç©ºã€ï¼Œæ­¤æ—¶æ’å…¥çš„ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤å¤´æŒ‡é’ˆä¹ŸæŒ‡å‘æ–°èŠ‚ç‚¹</li>
</ul>
</li>
<li><strong>else</strong> åŸé“¾è¡¨ä¸ä¸º <code>null</code><ul>
<li>è¯´æ˜ã€Œé“¾è¡¨ä¸ç©ºã€ï¼Œå°¾æ’åˆ°é“¾è¡¨ä¸Š</li>
</ul>
</li>
<li><code>size</code> &amp; <code>modCount</code> è‡ªå¢</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">linkLast</span><span class="hljs-params">(E e)</span> </span>&#123;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; l = last;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; newNode = <span class="hljs-keyword">new</span> Node&lt;&gt;(l, e, <span class="hljs-keyword">null</span>);<br>    last = newNode;<br>    <span class="hljs-keyword">if</span> (l == <span class="hljs-keyword">null</span>)<br>        first = newNode;<br>    <span class="hljs-keyword">else</span><br>        l.next = newNode;<br>    size++;<br>    modCount++;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æ’å…¥å…ƒç´ åˆ°éç©ºèŠ‚ç‚¹ä¹‹å‰-linkBefore-E-e-Node-succ"><a href="#æ’å…¥å…ƒç´ åˆ°éç©ºèŠ‚ç‚¹ä¹‹å‰-linkBefore-E-e-Node-succ" class="headerlink" title="æ’å…¥å…ƒç´ åˆ°éç©ºèŠ‚ç‚¹ä¹‹å‰ linkBefore(E e, Node succ)"></a>æ’å…¥å…ƒç´ åˆ°éç©ºèŠ‚ç‚¹ä¹‹å‰ linkBefore(E e, Node<E> succ)</h4><ul>
<li>æ–­è¨€ <code>index</code>èŠ‚ç‚¹éç©º</li>
<li>è·å¾— <code>index</code> èŠ‚ç‚¹å‰é©± <code>pred</code> </li>
<li>åˆ›å»ºèŠ‚ç‚¹ï¼Œå€¼ä¸º <code>e</code>ï¼Œå‰é©±ä¸º <code>pred</code>ï¼Œåç»§ä¸º <code>succ</code></li>
<li>åç»§è¿æ¥ä¸Šæ–°èŠ‚ç‚¹</li>
<li><strong>if</strong> å‰é©±ä¸ºç©º<ul>
<li>è¯´æ˜ã€Œæ’å…¥ä½ç½®åœ¨é“¾è¡¨å¤´ã€ï¼Œå¤´æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</li>
</ul>
</li>
<li><strong>else</strong> åç»§ä¸ºç©º<ul>
<li>è¯´æ˜ã€Œæ’å…¥ä½ç½®åœ¨ä¸­é—´ã€ï¼Œå‰é©±æŒ‡å‘æ–°èŠ‚ç‚¹</li>
</ul>
</li>
<li><code>size</code> &amp; <code>modCount</code> è‡ªå¢</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">linkBefore</span><span class="hljs-params">(E e, Node&lt;E&gt; succ)</span> </span>&#123;<br>    <span class="hljs-comment">// assert succ != null;</span><br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; pred = succ.prev;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; newNode = <span class="hljs-keyword">new</span> Node&lt;&gt;(pred, e, succ);<br>    succ.prev = newNode;<br>    <span class="hljs-keyword">if</span> (pred == <span class="hljs-keyword">null</span>)<br>        first = newNode;<br>    <span class="hljs-keyword">else</span><br>        pred.next = newNode;<br>    size++;<br>    modCount++;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æ’å…¥å…ƒç´ åˆ°é“¾è¡¨å¤´-linkFirst-E-e"><a href="#æ’å…¥å…ƒç´ åˆ°é“¾è¡¨å¤´-linkFirst-E-e" class="headerlink" title="æ’å…¥å…ƒç´ åˆ°é“¾è¡¨å¤´ linkFirst(E e)"></a>æ’å…¥å…ƒç´ åˆ°é“¾è¡¨å¤´ linkFirst(E e)</h4><ul>
<li>è·å¾—å¤´èŠ‚ç‚¹</li>
<li>åˆ›å»ºèŠ‚ç‚¹ï¼Œå€¼ä¸º <code>e</code>ï¼Œå‰é©±ä¸º <code>null</code>ï¼Œåç»§ä¸º <code>f</code>ï¼Œå³æ—§å¤´ç»“ç‚¹</li>
<li>å¤´æŒ‡é’ˆç§»åˆ°æ–°èŠ‚ç‚¹</li>
<li><strong>if</strong> æ—§å¤´èŠ‚ç‚¹ä¸ºç©º<ul>
<li>è¯´æ˜ã€Œé“¾è¡¨ä¸ºç©ºã€ï¼Œå°¾æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</li>
</ul>
</li>
<li><strong>else</strong> æ—§å¤´èŠ‚ç‚¹ä¸ç©º<ul>
<li>è¯´æ˜ã€Œé“¾è¡¨ä¸ç©ºã€ï¼Œè¿æ¥ æ–°èŠ‚ç‚¹&amp;æ—§å¤´ç»“ç‚¹</li>
</ul>
</li>
<li><code>size</code> &amp; <code>modCount</code> è‡ªå¢</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">linkFirst</span><span class="hljs-params">(E e)</span> </span>&#123;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; f = first;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; newNode = <span class="hljs-keyword">new</span> Node&lt;&gt;(<span class="hljs-keyword">null</span>, e, f);<br>    first = newNode;<br>    <span class="hljs-keyword">if</span> (f == <span class="hljs-keyword">null</span>)<br>        last = newNode;<br>    <span class="hljs-keyword">else</span><br>        f.prev = newNode;<br>    size++;<br>    modCount++;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="åˆ é™¤èŠ‚ç‚¹-unlink-Node-x"><a href="#åˆ é™¤èŠ‚ç‚¹-unlink-Node-x" class="headerlink" title="åˆ é™¤èŠ‚ç‚¹ unlink(Node x)"></a>åˆ é™¤èŠ‚ç‚¹ unlink(Node<E> x)</h4><ul>
<li>æ–­è¨€ èŠ‚ç‚¹ä¸ç©º</li>
<li>è·å– è¯¥èŠ‚ç‚¹ <code>element</code>ã€å‰é©± <code>prev</code> å’Œåç»§ <code>next</code></li>
<li><strong>if</strong> å‰é©±ä¸ºç©º<ul>
<li>è¯´æ˜ã€Œè¯¥èŠ‚ç‚¹ä¸ºå¤´èŠ‚ç‚¹ã€ï¼Œå¤´æŒ‡é’ˆç›´æ¥æŒ‡å‘åç»§</li>
</ul>
</li>
<li><strong>else</strong> å‰é©±ä¸ç©º<ul>
<li>è¯´æ˜ã€Œè¯¥èŠ‚ç‚¹éå¤´èŠ‚ç‚¹ã€ï¼Œå‰é©±æŒ‡å‘åç»§ï¼Œå†æ–­ã€Œx æŒ‡å‘å‰é©±ã€</li>
</ul>
</li>
<li>åŒå‘é“¾è¡¨ï¼Œåé¢çš„æ–¹å‘é“ç†åŒä¸Š</li>
<li><code>size</code> è‡ªå‡ï¼Œ <code>modCount</code> è‡ªå¢ï¼Œå…ƒç´ ç½®ç©ºï¼Œè¿”å›åˆ é™¤çš„èŠ‚ç‚¹</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function">E <span class="hljs-title">unlink</span><span class="hljs-params">(Node&lt;E&gt; x)</span> </span>&#123;<br>    <span class="hljs-comment">// assert x != null;</span><br>    <span class="hljs-keyword">final</span> E element = x.item;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; next = x.next;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; prev = x.prev;<br><br>    <span class="hljs-keyword">if</span> (prev == <span class="hljs-keyword">null</span>) &#123;<br>        first = next;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        prev.next = next;<br>        x.prev = <span class="hljs-keyword">null</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (next == <span class="hljs-keyword">null</span>) &#123;<br>        last = prev;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        next.prev = prev;<br>        x.next = <span class="hljs-keyword">null</span>;<br>    &#125;<br><br>    x.item = <span class="hljs-keyword">null</span>;<br>    size--;<br>    modCount++;<br>    <span class="hljs-keyword">return</span> element;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="æ£€ç´¢èŠ‚ç‚¹åœ¨é“¾è¡¨çš„ä¸‹æ ‡ä½ç½®-node-int-index"><a href="#æ£€ç´¢èŠ‚ç‚¹åœ¨é“¾è¡¨çš„ä¸‹æ ‡ä½ç½®-node-int-index" class="headerlink" title="æ£€ç´¢èŠ‚ç‚¹åœ¨é“¾è¡¨çš„ä¸‹æ ‡ä½ç½® node(int index)"></a>æ£€ç´¢èŠ‚ç‚¹åœ¨é“¾è¡¨çš„ä¸‹æ ‡ä½ç½® node(int index)</h4><ul>
<li>æ–­è¨€ <code>indexâˆˆ[0, size)</code></li>
<li><strong>if</strong> ä¸‹æ ‡åœ¨å·¦åŠè¾¹<ul>
<li>ä»å¤´å‘ä¸­é—´æ£€ç´¢</li>
</ul>
</li>
<li><strong>else</strong> ä¸‹æ ‡åœ¨å³åŠè¾¹<ul>
<li>ä»åå‘ä¸­é—´æ£€ç´¢</li>
</ul>
</li>
</ul>
<p>ğŸ“ŒäºŒåˆ†æ€æƒ³ï¼Œåˆ©ç”¨å¥½åŒå‘é“¾è¡¨ï¼ŒåŒæ—¶å¤´å°¾èŠ‚ç‚¹éƒ½æ˜¯å›ºå®šçš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function">Node&lt;E&gt; <span class="hljs-title">node</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>    <span class="hljs-comment">// assert isElementIndex(index);</span><br>    <span class="hljs-keyword">if</span> (index &lt; (size &gt;&gt; <span class="hljs-number">1</span>)) &#123;<br>        Node&lt;E&gt; x = first;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; index; i++)<br>            x = x.next;<br>        <span class="hljs-keyword">return</span> x;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        Node&lt;E&gt; x = last;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = size - <span class="hljs-number">1</span>; i &gt; index; i--)<br>            x = x.prev;<br>        <span class="hljs-keyword">return</span> x;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h4 id="è·å–å…ƒç´ å››ç§æ–¹æ³•çš„åŒºåˆ«"><a href="#è·å–å…ƒç´ å››ç§æ–¹æ³•çš„åŒºåˆ«" class="headerlink" title="è·å–å…ƒç´ å››ç§æ–¹æ³•çš„åŒºåˆ«"></a>è·å–å…ƒç´ å››ç§æ–¹æ³•çš„åŒºåˆ«</h4><p><code>getFirst()</code> &amp; <code>getLast()</code> &amp; <code>peekFirst()</code> &amp; <code>peekLast()</code> </p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">peekFirst</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; f = first;<br>    <span class="hljs-keyword">return</span> (f == <span class="hljs-keyword">null</span>) ? <span class="hljs-keyword">null</span> : f.item;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">getFirst</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; f = first;<br>    <span class="hljs-keyword">if</span> (f == <span class="hljs-keyword">null</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NoSuchElementException();<br>    <span class="hljs-keyword">return</span> f.item;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>å¾ˆæ˜æ˜¾ï¼Œ<code>peek</code> ç±»å‹çš„æ–¹æ³•åœ¨ç©ºé“¾è¡¨æ—¶ä¼šè¿”å› <code>null</code>ï¼Œ<code>get</code> ç±»å‹åˆ™<strong>æŠ›å‡ºå¼‚å¸¸</strong> <code>NoSuchElementException</code> </li>
</ul>
<h4 id="LinkedList-ä½œåŒç«¯é˜Ÿåˆ—å’Œæ ˆçš„ç»†èŠ‚"><a href="#LinkedList-ä½œåŒç«¯é˜Ÿåˆ—å’Œæ ˆçš„ç»†èŠ‚" class="headerlink" title="LinkedList ä½œåŒç«¯é˜Ÿåˆ—å’Œæ ˆçš„ç»†èŠ‚"></a>LinkedList ä½œåŒç«¯é˜Ÿåˆ—å’Œæ ˆçš„ç»†èŠ‚</h4><p>å› ä¸º <code>LinkedList </code> åŒæ—¶ä¹Ÿå®ç°äº† <code>Deque</code> æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸º<strong>åŒç«¯é˜Ÿåˆ—</strong>ï¼Œè‡ªç„¶ä¹Ÿå¯ä»¥å½“åš<strong>æ ˆ</strong>ã€Œä¸€å¼€ä¸€é—­ã€ã€‚</p>
<ul>
<li>æ ˆ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Deque&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> ArrayDeque&lt;Integer&gt;();<br>        stack.push(<span class="hljs-number">1</span>);<br>        stack.push(<span class="hljs-number">2</span>);<br>        stack.push(<span class="hljs-number">3</span>);<br>        System.out.println(stack);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<blockquote>
<p>[3, 2, 1]</p>
</blockquote>
<ul>
<li>é˜Ÿåˆ—</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Deque&lt;Integer&gt; queue = <span class="hljs-keyword">new</span> ArrayDeque&lt;Integer&gt;();<br>        queue.offer(<span class="hljs-number">1</span>);<br>        queue.offer(<span class="hljs-number">2</span>);<br>        queue.offer(<span class="hljs-number">3</span>);<br>        System.out.println(queue);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<blockquote>
<p>[1, 2, 3]</p>
</blockquote>
<p>æ—¢ç„¶å¯ä»¥åŒæ—¶ä½œé˜Ÿåˆ—å’Œæ ˆï¼Œå¼•å‘æ€è€ƒï¼ŒåŒä¸º <code>peek()</code> è·å¾—ã€Œæ ˆé¡¶ã€| ã€Œé˜Ÿå¤´ã€å…ƒç´ ï¼Œé‚£ä¹ˆçŒœæµ‹<strong>é˜Ÿåˆ—é¦–éƒ¨</strong>å’Œ<strong>æ ˆé¡¶å¼€å£</strong>æ˜¯<strong>åŒä¸ªæ–¹å‘</strong>çš„ã€‚</p>
<ul>
<li>æŸ¥çœ‹ <code>Deque</code> çš„ <code>peek()</code> å®˜æ–¹æ³¨é‡Š</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Retrieves, but does not remove, the head of the queue represented by</span><br><span class="hljs-comment"> * this deque (in other words, the first element of this deque), or</span><br><span class="hljs-comment"> * returns &#123;<span class="hljs-doctag">@code</span> null&#125; if this deque is empty.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;p&gt;This method is equivalent to &#123;<span class="hljs-doctag">@link</span> #peekFirst()&#125;.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> the head of the queue represented by this deque, or</span><br><span class="hljs-comment"> *         &#123;<span class="hljs-doctag">@code</span> null&#125; if this deque is empty</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function">E <span class="hljs-title">peek</span><span class="hljs-params">()</span></span>;<br></code></pre></div></td></tr></table></figure>
<p><code>peek()</code> è¿”å› deque é˜Ÿåˆ—å¤´ï¼Œ å¦‚æœåŒç«¯é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å› <code>null</code></p>
<ul>
<li>æŸ¥çœ‹ <code>LinkedList</code> å®ç°çš„ <code>peek()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">peek</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; f = first;<br>    <span class="hljs-keyword">return</span> (f == <span class="hljs-keyword">null</span>) ? <span class="hljs-keyword">null</span> : f.item;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>è·å–å·¦ä¾§é“¾è¡¨é¦–éƒ¨</p>
<ul>
<li>æŸ¥çœ‹ <code>ArrayDeque</code> å®ç°çš„ <code>peek()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">peek</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> peekFirst();<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>è·å–é˜Ÿåˆ—é¦–éƒ¨</p>
<p>ğŸ“Œç»“è®ºï¼šå®˜æ–¹å®šä¹‰çš„å·¦è¾¹ï¼ˆFirstï¼‰æ˜¯<code>æ ˆé¦–</code>ï¼Œ<code>é˜Ÿåˆ—å¤´</code>ã€‚ç”±æ­¤æ‰èƒ½å®ç°ä¸€ä¸ªæ–¹æ³•è¾¾åˆ°ç›¸åŒçš„<strong>peek</strong> æ•ˆæœã€‚</p>
<h2 id="ğŸ”—Referenceï¼š"><a href="#ğŸ”—Referenceï¼š" class="headerlink" title="ğŸ”—Referenceï¼š"></a>ğŸ”—<strong>Referenceï¼š</strong></h2><blockquote>
</blockquote>
<section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/35756277/why-the-maximum-array-size-of-arraylist-is-integer-max-value-8">Why the maximum array size of ArrayList is Integer.MAX_VALUE - 8?</a>
<blockquote>
</blockquote>
<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://developer.ibm.com/articles/j-codetoheap/#:~:text=those%20128%20bits.-,Anatomy%20of%20a%20Java%20array%20object,-The%20shape%20and">Anatomy of a Java array object</a>
<blockquote>
</blockquote>
<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://developer.ibm.com/articles/j-codetoheap/#:~:text=the%20native%20heap.-,Anatomy%20of%20a%20Java%20object,-When%20your%20Java">Anatomy of a Java object</a>
<blockquote>
</blockquote>
<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/33147339/difference-between-if-a-b-0-and-if-a-b">[Difference between if (a - b &lt; 0) and if (a &lt; b)]</a>
<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/JavaSE/">JavaSE</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/08/16/JavaSE/Java%E5%B8%B8%E7%94%A8%E9%9B%86%E5%90%88%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%20%E2%85%A1/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Javaå¸¸ç”¨é›†åˆæºç åˆ†æ â…¡</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/06/02/JVM/JVM%E3%80%8CHotSpot%20VM%E3%80%8D/">
                        <span class="hidden-mobile">JVMã€ŒHotSpot VMã€</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     Â© 2019-2021 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js" ></script>

  











<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


</body>
</html>

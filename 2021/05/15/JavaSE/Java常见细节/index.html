

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon%2032x32.ico">
  <link rel="icon" href="/img/favicon%2032x32.ico">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="hypocrite30">
  <meta name="keywords" content="">
  
  <title>Javaå¸¸è§ç»†èŠ‚ - hypocrite30</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/idea.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.9","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":"Â§"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":2},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":"b5f391eebc7eaea88e68a49d5924e381","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Hypocrite30 BLOG</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/postPage.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Javaå¸¸è§ç»†èŠ‚">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-05-15 20:52" pubdate>
        2021å¹´5æœˆ15æ—¥ æ™šä¸Š
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.5k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      47
       åˆ†é’Ÿ
    </span>
  

  
  
    
      <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Javaå¸¸è§ç»†èŠ‚</h1>
            
              <p class="note note-info">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2021å¹´5æœˆ15æ—¥ æ™šä¸Š
                
              </p>
            
            <div class="markdown-body">
              <h1 id="Javaå¸¸è§ç»†èŠ‚"><a href="#Javaå¸¸è§ç»†èŠ‚" class="headerlink" title="Javaå¸¸è§ç»†èŠ‚"></a>Javaå¸¸è§ç»†èŠ‚</h1><h2 id="1-ã€Œreplaceä¼šæ›¿æ¢æ‰€æœ‰å­—ç¬¦ï¼Ÿã€"><a href="#1-ã€Œreplaceä¼šæ›¿æ¢æ‰€æœ‰å­—ç¬¦ï¼Ÿã€" class="headerlink" title="1. ã€Œreplaceä¼šæ›¿æ¢æ‰€æœ‰å­—ç¬¦ï¼Ÿã€"></a>1. ã€Œreplaceä¼šæ›¿æ¢æ‰€æœ‰å­—ç¬¦ï¼Ÿã€</h2><p>å¦‚æœå°†å­—ç¬¦ä¸²ä¸­ <code>A</code> æ›¿æ¢ä¸º <code>B</code> ï¼Œåˆ™ä½¿ç”¨ <code>replaceAll</code> æ–¹æ³•ã€‚</p>
<p><code>replace</code> ä¼šæ›¿æ¢æ‰€æœ‰åŒ¹é…å­—ç¬¦å—ï¼Ÿ</p>
<blockquote>
<p>Replaces each substring of this string that matches the literal target sequence with the specified literal replacement sequence. The replacement proceeds from the beginning of the string to the end, for example, replacing â€œaaâ€ with â€œbâ€ in the string â€œaaaâ€ will result in â€œbaâ€ rather than â€œabâ€.</p>
</blockquote>
<ul>
<li>æ›¿æ¢ä»å­—ç¬¦ä¸²çš„å¼€å¤´ä¸€ç›´è¿›è¡Œåˆ°ç»“å°¾ï¼ŒåŒ¹é…æˆåŠŸå°±æ›¿æ¢ï¼Œç„¶åæ¥ä¸‹å»ã€‚</li>
<li>ä¾‹å¦‚ï¼šåŸå­—ç¬¦ä¸²ï¼š<code>aaa</code> ï¼Œå°† <code>aa</code> æ›¿æ¢ä¸º <code>b</code> ï¼Œåˆ™ç»“æœæ˜¯ <code>ba</code> è€Œä¸æ˜¯ <code>ab</code> ï¼Œå› ä¸ºæ˜¯ä»å‰å¾€åã€‚</li>
</ul>
<ol>
<li><code>replace</code>  ä¸¤ä¸ªé‡è½½æ–¹æ³•</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">replace</span><span class="hljs-params">(<span class="hljs-keyword">char</span> oldChar, <span class="hljs-keyword">char</span> newChar)</span> <span class="hljs-comment">/* æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ */</span></span><br></code></pre></div></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">replace</span><span class="hljs-params">(CharSequence target, CharSequence replacement)</span> <span class="hljs-comment">/* æ›¿æ¢ä¸€ä¸ªä¸² */</span></span><br></code></pre></div></td></tr></table></figure>
<ol start="2">
<li><code>replaceAll</code> </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">replaceAll</span><span class="hljs-params">(String regex, String replacement)</span> <span class="hljs-comment">/* å‰é¢æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æˆåŠŸæ›¿æ¢ä¸ºåé¢å­—ç¬¦ä¸² */</span></span><br></code></pre></div></td></tr></table></figure>
<p>ä¸¾ä¾‹ğŸŒ°ï¼šåŸä¸² s é‡Œçš„ <code>*</code> æ›¿æ¢ä¸º <code>A</code> ä¸¤ç§å†™æ³•ï¼š</p>
<ul>
<li><code>s.replaceAll(&quot;\\*&quot;, &quot;A&quot;)</code> åªèƒ½æ¥æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‡ºæ¥æ›¿æ¢ã€‚</li>
<li><code>s.replace(&quot;*&quot;, &quot;A&quot;)</code> </li>
</ul>
<ol start="3">
<li><code>replaceFirst</code> åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…å­—ç¬¦ä¸²</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">replaceFirst</span><span class="hljs-params">(String regex, String replacement)</span></span><br></code></pre></div></td></tr></table></figure>


<h2 id="2-ã€ŒIntegerä¸èƒ½ç”¨-åˆ¤æ–­ï¼Ÿã€"><a href="#2-ã€ŒIntegerä¸èƒ½ç”¨-åˆ¤æ–­ï¼Ÿã€" class="headerlink" title="2. ã€ŒIntegerä¸èƒ½ç”¨ == åˆ¤æ–­ï¼Ÿã€"></a>2. ã€ŒIntegerä¸èƒ½ç”¨ == åˆ¤æ–­ï¼Ÿã€</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Integer orderStatus1 = <span class="hljs-keyword">new</span> Integer(<span class="hljs-number">1</span>);<br>Integer orderStatus2 = <span class="hljs-keyword">new</span> Integer(<span class="hljs-number">1</span>);<br>System.out.println(orderStatus1 == orderStatus2);<br></code></pre></div></td></tr></table></figure>
<ul>
<li>ç»“æœä¼šè¿”å› <code>false</code> </li>
<li>ä¸æ˜¯è¯´ Integer æœ‰ç¼“å­˜å—ï¼ŒèŒƒå›´æ˜¯ -128 ~ 127</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Integer</span><span class="hljs-params">(<span class="hljs-keyword">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">this</span>.value = value;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>æœ‰å‚æ„é€ å¹¶<strong>æ²¡æœ‰</strong>ç”¨åˆ°ç¼“å­˜</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title">valueOf</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)<br>        <span class="hljs-keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Integer(i);<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>è¦ç”¨åˆ°ç¼“å­˜ï¼Œå°±åº”è¯¥ä½¿ç”¨ <code>valueOf</code> æ–¹æ³•</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">String orderStatus1 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">&quot;1&quot;</span>);<br>String orderStatus2 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">&quot;1&quot;</span>);<br>System.out.println(Integer.valueOf(orderStatus1) == Integer.valueOf(orderStatus2));<br></code></pre></div></td></tr></table></figure>
<ul>
<li>è¿™æ ·å°±ä¼šè¿”å› true</li>
<li>åªæœ‰è¿™ç§ç‰¹æ®Šæƒ…å†µæ‰ä¼šä½¿åˆ¤æ–­ç»“æœç›¸åŒï¼Œå…»æˆå¥½å–œæ¬¢ï¼Œç»Ÿä¸€ä½¿ç”¨ <code>equals</code> æ¥åˆ¤æ–­ç›¸ç­‰ã€‚</li>
</ul>
<h2 id="3-ã€Œä½¿ç”¨BigDecimalä¸ä¸¢å¤±ç²¾åº¦ï¼Ÿã€"><a href="#3-ã€Œä½¿ç”¨BigDecimalä¸ä¸¢å¤±ç²¾åº¦ï¼Ÿã€" class="headerlink" title="3. ã€Œä½¿ç”¨BigDecimalä¸ä¸¢å¤±ç²¾åº¦ï¼Ÿã€"></a>3. ã€Œä½¿ç”¨BigDecimalä¸ä¸¢å¤±ç²¾åº¦ï¼Ÿã€</h2><p>æ¶‰åŠé‡‘èä¸šåŠ¡ï¼Œä¸å¯é¿å…æ¥è§¦åˆ°å°æ•°ã€‚</p>
<p>ä½¿ç”¨Doubleæ—¶å‡ºç°çš„åœºæ™¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">double</span> amount1 = <span class="hljs-number">0.02</span>;<br><span class="hljs-keyword">double</span> amount2 = <span class="hljs-number">0.03</span>;<br>System.out.println(amount2 - amount1); <span class="hljs-comment">// 0.009999999999999998</span><br></code></pre></div></td></tr></table></figure>
<p>ç»“æœå°äºé¢„è®¡ç»“æœã€‚</p>
<ul>
<li>Doubleç±»å‹ä¸¤ä¸ªå‚æ•°ç›¸å‡ä¼šè½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œè€ŒDoubleæœ‰æ•ˆä½æ˜¯16ä½ï¼Œå‡ºç°å­˜å‚¨å°æ•°ä½ä¸å¤Ÿã€‚</li>
<li>ä½¿ç”¨ <code>BigDecimal</code> å°±å¯ä»¥é¿å…ä¸¢å¤±ç²¾åº¦å—ï¼Ÿè¿˜æ˜¯è¦çœ‹ä½ æ€ä¹ˆç”¨ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">BigDecimal amount1 = <span class="hljs-keyword">new</span> BigDecimal(<span class="hljs-number">0.02</span>);<br>BigDecimal amount2 = <span class="hljs-keyword">new</span> BigDecimal(<span class="hljs-number">0.03</span>);<br>System.out.println(amount2.subtract(amount1));<br></code></pre></div></td></tr></table></figure>
<blockquote>
<p>0.0099999999999999984734433411404097569175064563751220703125</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ä»ç„¶ä¸¢å¤±ç²¾åº¦ã€‚</p>
<p>çœ‹ <code>BigDecimal</code> å¸¦ double å‚æ•°çš„æ„é€ æ–¹æ³•ä¸Šçš„æ³¨é‡Š</p>
<blockquote>
<p>Notes:</p>
<ol>
<li><p>The results of this constructor can be somewhat unpredictable. One might assume that writing new BigDecimal(0.1) in Java creates a BigDecimal which is exactly equal to 0.1 (an unscaled value of 1, with a scale of 1), but it is actually equal to 0.1000000000000000055511151231257827021181583404541015625. This is because 0.1 cannot be represented exactly as a double (or, for that matter, as a binary fraction of any finite length). Thus, the value that is being passed in to the constructor is not exactly equal to 0.1, appearances notwithstanding.</p>
</li>
<li><p>The String constructor, on the other hand, is perfectly predictable: writing new BigDecimal(â€œ0.1â€) creates a BigDecimal which is exactly equal to 0.1, as one would expect. Therefore, it is generally recommended that the String constructor be used in preference to this one.</p>
</li>
<li><p>When a double must be used as a source for a BigDecimal, note that this constructor provides an exact conversion; it does not give the same result as converting the double to a String using the Double.toString(double) method and then using the BigDecimal(String) constructor. To get that result, use the static valueOf(double) method.</p>
</li>
</ol>
</blockquote>
<ul>
<li><p><code>public BigDecimal(double val)</code> è¿™ç§æ„é€ æ–¹æ³•ç”Ÿæˆçš„ç»“æœä¸å¯é¢„æµ‹(unpredictable)</p>
</li>
<li><p>æ³¨é‡Šä¸¾ä¾‹çš„ 0.1 æ— æ³•å‡†ç¡®æ›¿æ¢ä¸ºdoubleï¼Œå³æ— æ³•æ›¿æ¢ä¸ºä»»ä½•æœ‰é™é•¿åº¦çš„äºŒè¿›åˆ¶åˆ†æ•°</p>
</li>
<li><p>å®˜æ–¹æ¨èå…¥å‚é€‰ç”¨ <code>String</code> å­—ç¬¦ä¸²ï¼Œè¿™æ ·ä¼ å…¥å¤šå°‘ï¼Œç”Ÿæˆå¤šå°‘ã€‚</p>
</li>
<li><p>å¦‚æœéå¾—ç”¨ <code>double</code> å…¥å‚ï¼Œåˆ™å…ˆ <code>Double.toString(double)</code> è½¬æˆStringå†æ„é€ ã€‚</p>
</li>
<li><p>æˆ–è€…ä½¿ç”¨ <code>public static BigDecimal valueOf(double val)</code> é™æ€æ–¹æ³•ç”Ÿæˆï¼Œä¹Ÿæ˜¯é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œæ¨èçš„æ„é€ å½¢å¼ã€‚</p>
</li>
</ul>
<h2 id="4-ã€Œå­—ç¬¦ä¸²æ‹¼æ¥ä¸èƒ½ç”¨Stringï¼Ÿã€"><a href="#4-ã€Œå­—ç¬¦ä¸²æ‹¼æ¥ä¸èƒ½ç”¨Stringï¼Ÿã€" class="headerlink" title="4.  ã€Œå­—ç¬¦ä¸²æ‹¼æ¥ä¸èƒ½ç”¨Stringï¼Ÿã€"></a>4.  ã€Œå­—ç¬¦ä¸²æ‹¼æ¥ä¸èƒ½ç”¨Stringï¼Ÿã€</h2><p><code>String</code>ç±»å‹çš„å­—ç¬¦ä¸²è¢«ç§°ä¸ºä¸å¯å˜åºåˆ—ï¼Œåœ¨å¤§é‡å­—ç¬¦ä¸²æ‹¼æ¥çš„åœºæ™¯ä¸­ï¼Œå¦‚æœå¯¹è±¡å®šä¹‰ä¸º String ï¼Œä¼šäº§ç”Ÿå¾ˆå¤šæ— ç”¨çš„ä¸­é—´å¯¹è±¡ï¼Œæµªè´¹å†…å­˜ç©ºé—´ï¼Œæ•ˆç‡ä½ã€‚</p>
<p>æ¨èä½¿ç”¨æ›´é«˜æ•ˆçš„å¯å˜å­—ç¬¦åºåˆ—ï¼š<code>StringBuilder</code> å’Œ <code>StringBuffer</code> </p>
<p><code>StringBuilder</code> è™½ç„¶çº¿ç¨‹ä¸å®‰å…¨ï¼Œä½†æ˜¯å¤šçº¿ç¨‹æ‹¼æ¥å­—ç¬¦ä¸²æƒ…å†µå¾ˆå°‘ï¼Œæ‰€ä»¥å°±ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ã€‚<code>append</code> æ–¹æ³•è¿½åŠ å­—ç¬¦ä¸²å³å¯ã€‚</p>
<p><strong>ã€Œå­—ç¬¦ä¸²æ‹¼æ¥æ—¶ä½¿ç”¨Stringç±»å‹çš„å¯¹è±¡ï¼Œæ•ˆç‡ä¸€å®šæ¯”StringBuilderç±»å‹çš„å¯¹è±¡ä½ï¼Ÿã€</strong></p>
<p>å¦ã€‚</p>
<p>é€šè¿‡ <code>javap -c</code> åç¼–è¯‘å¯çŸ¥ï¼Œæ€»JDK5å¼€å§‹ï¼Œjavaå¯¹Stringæ‹¼æ¥å­—ç¬¦ä¸²è¿›è¡Œä¼˜åŒ–ï¼Œç¼–è¯‘æˆå­—èŠ‚ç éƒ½ä¼šå˜æˆStringBuilderçš„appendæ“ä½œã€‚</p>
<h2 id="5-ã€ŒMapåˆå§‹åŒ–æ³¨æ„äº‹é¡¹ã€"><a href="#5-ã€ŒMapåˆå§‹åŒ–æ³¨æ„äº‹é¡¹ã€" class="headerlink" title="5. ã€ŒMapåˆå§‹åŒ–æ³¨æ„äº‹é¡¹ã€"></a>5. ã€ŒMapåˆå§‹åŒ–æ³¨æ„äº‹é¡¹ã€</h2><ul>
<li>Mapåˆå§‹åŒ–åŒæ—¶å¯¼å…¥æ•°æ®æœ‰ä»¥ä¸‹ä¸‰ç§å¸¸è§æ–¹æ³•</li>
</ul>
<ol>
<li>staticå—åˆå§‹åŒ–</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Map&lt;String, String&gt; myMap;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        myMap = <span class="hljs-keyword">new</span> HashMap&lt;String, String&gt;();<br>        myMap.put(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>);<br>        myMap.put(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ol start="2">
<li>Guavaç±»åº“</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªHashMap</span><br>Map&lt;String, Object&gt; hashMap  = Maps.newHashMap();<br><span class="hljs-comment">// åˆ›å»ºä¸å¯å˜Map</span><br>Map&lt;String, Integer&gt; left = ImmutableMap.of(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">3</span>);<br><span class="hljs-comment">// æˆ–è€…</span><br>Map&lt;String, String&gt; test = ImmutableMap.&lt;String, String&gt;builder()<br>.put(<span class="hljs-string">&quot;k1&quot;</span>, <span class="hljs-string">&quot;v1&quot;</span>)<br>.put(<span class="hljs-string">&quot;k2&quot;</span>, <span class="hljs-string">&quot;v2&quot;</span>)<br>.build();<br></code></pre></div></td></tr></table></figure>
<ol start="3">
<li>ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    Map map = <span class="hljs-keyword">new</span> HashMap() &#123;&#123;<br>        put(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>        put(<span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>        put(<span class="hljs-string">&quot;map3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>    &#125;&#125;;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>ğŸ“Œå¤–å±‚çš„æ‹¬å·æ˜¯åˆ›å»º <strong>åŒ¿åå†…éƒ¨ç±»</strong> ã€ŒAnonymous Inner Classã€ ï¼Œ<strong>è¿™é‡Œä¼šé€ æˆéšæ‚£</strong>ã€‚</li>
<li>å†…å±‚æ˜¯æ‹¬å·æ˜¯åˆ›å»º <strong>å®ä¾‹åˆå§‹åŒ–å—</strong> </li>
</ul>
<h3 id="â‘ éªŒè¯åŒ¿åå†…éƒ¨ç±»"><a href="#â‘ éªŒè¯åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="â‘ éªŒè¯åŒ¿åå†…éƒ¨ç±»"></a>â‘ éªŒè¯åŒ¿åå†…éƒ¨ç±»</h3><ul>
<li>é¦–å…ˆ <code>javac</code> ç¼–è¯‘ .java æ–‡ä»¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    Map map = <span class="hljs-keyword">new</span> HashMap() &#123;&#123;<br>        put(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>        put(<span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>        put(<span class="hljs-string">&quot;map3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>    &#125;&#125;;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<img src="https://gitee.com/hypocrite30/ImgBed/raw/master/img/JavaCommons/image-20210515165844089.png" srcset="/img/loading.gif" lazyload style="zoom:150%;" />

<p><img src="https://gitee.com/hypocrite30/ImgBed/raw/master/img/JavaCommons/image-20210515170722679.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>$1 <span class="hljs-keyword">extends</span> <span class="hljs-title">HashMap</span> </span>&#123;<br>    Solution$<span class="hljs-number">1</span>(Solution var1) &#123;<br>        <span class="hljs-keyword">this</span>.<span class="hljs-keyword">this</span>$<span class="hljs-number">0</span> = var1;<br>        <span class="hljs-keyword">this</span>.put(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>        <span class="hljs-keyword">this</span>.put(<span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>        <span class="hljs-keyword">this</span>.put(<span class="hljs-string">&quot;map3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>è¯´æ˜çš„ç¡®æ˜¯åˆ›å»ºäº†ä¸€ä¸ª<strong>åŒ¿åå†…éƒ¨ç±»</strong></li>
</ul>
<h3 id="â‘¡éé™æ€å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨"><a href="#â‘¡éé™æ€å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨" class="headerlink" title="â‘¡éé™æ€å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨"></a>â‘¡éé™æ€å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨</h3><ul>
<li>Java ä¸­<strong>éé™æ€å†…éƒ¨ç±»</strong>ä¼š<strong>æŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨</strong>ï¼Œä»è€Œå¯¼è‡´ GC æ— æ³•å›æ”¶è¿™éƒ¨åˆ†ä»£ç çš„å¼•ç”¨ï¼Œä»¥è‡³äºé€ æˆ<strong>å†…å­˜æº¢å‡º</strong>ã€‚</li>
</ul>
<ol>
<li>ğŸ¬ä¸ºä»€ä¹ˆè¦<strong>æŒæœ‰å¤–éƒ¨ç±»</strong>ï¼Ÿ</li>
</ol>
<p>éé™æ€åŒ¿åå†…éƒ¨ç±»çš„ä¸»è¦ä½œç”¨æœ‰ä¸¤ä¸ªã€‚</p>
<ul>
<li><p>å½“åŒ¿åå†…éƒ¨ç±»åªåœ¨å¤–éƒ¨ç±»ï¼ˆä¸»ç±»ï¼‰ä¸­ä½¿ç”¨æ—¶ï¼ŒåŒ¿åå†…éƒ¨ç±»å¯ä»¥è®©å¤–éƒ¨ä¸çŸ¥é“å®ƒçš„å­˜åœ¨ï¼Œä»è€Œå‡å°‘äº†ä»£ç çš„ç»´æŠ¤å·¥ä½œã€‚</p>
</li>
<li><p>å½“åŒ¿åå†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»æ—¶ï¼Œå®ƒå°±å¯ä»¥ç›´æ¥<strong>ä½¿ç”¨å¤–éƒ¨ç±»ä¸­çš„å˜é‡</strong>äº†ï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®Œæˆè°ƒç”¨ï¼š</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String userName = <span class="hljs-string">&quot;hypocrite30&quot;</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;<br>        Map map = <span class="hljs-keyword">new</span> HashMap() &#123;&#123;<br>            put(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>            put(<span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>            put(<span class="hljs-string">&quot;map3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>            put(userName, userName);<br>        &#125;&#125;;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>å†…éƒ¨ç±» <code>HashMap</code>  å¯ä»¥ç›´æ¥è°ƒç”¨å¤–éƒ¨ç±» <code>Solution</code> ä¸­çš„æˆå‘˜å˜é‡ <code>userName</code>.</li>
</ul>
<ol start="2">
<li>ğŸ¬å®ƒæ˜¯æ€ä¹ˆæŒæœ‰å¤–éƒ¨ç±»çš„ï¼Ÿ</li>
</ol>
<ul>
<li><code>javap -c &#39;.\Solution$1.class&#39;</code> åç¼–è¯‘å†…éƒ¨ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>$1 <span class="hljs-keyword">extends</span> <span class="hljs-title">java</span>.<span class="hljs-title">util</span>.<span class="hljs-title">HashMap</span> </span>&#123;<br>  <span class="hljs-keyword">final</span> Solution <span class="hljs-keyword">this</span>$<span class="hljs-number">0</span>;<br><br>  Solution$<span class="hljs-number">1</span>(Solution);<br>    Code:<br>       <span class="hljs-number">0</span>: aload_0<br>       <span class="hljs-number">1</span>: aload_1<br>       2: putfield      #1                  // Field this$0:LSolution;<br>       <span class="hljs-number">5</span>: aload_0<br>       6: invokespecial #2                  // Method java/util/HashMap.&quot;&lt;init&gt;&quot;:()V<br>       <span class="hljs-number">9</span>: aload_0<br>      10: ldc           #3                  // String map1<br>      12: ldc           #4                  // String value1<br>      14: invokevirtual #5                  // Method put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;<br>      <span class="hljs-number">17</span>: pop<br>      <span class="hljs-number">18</span>: aload_0<br>      19: ldc           #6                  // String map2<br>      21: ldc           #7                  // String value2<br>      23: invokevirtual #5                  // Method put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;<br>      <span class="hljs-number">26</span>: pop<br>      <span class="hljs-number">27</span>: aload_0<br>      28: ldc           #8                  // String map3<br>      30: ldc           #9                  // String value3<br>      32: invokevirtual #5                  // Method put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;<br>      <span class="hljs-number">35</span>: pop<br>      <span class="hljs-number">36</span>: <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li><p>Code2:<code>putfield</code> ï¼šä¸€å¯¹ <code>Solution</code> çš„å¼•ç”¨è¢«å­˜å…¥ <code>this$0</code> ä¸­ï¼Œæ­¤æ—¶è¯¥åŒ¿åå†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨</p>
</li>
<li><p>å¦ä¸€ç§ç›´è§‚æµ‹è¯•</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;<br>        Map map = <span class="hljs-keyword">new</span> Solution().createMap();<br>        Field field = map.getClass().getDeclaredField(<span class="hljs-string">&quot;this$0&quot;</span>);<br>        field.setAccessible(<span class="hljs-keyword">true</span>);<br>        System.out.println(field.get(map).getClass());<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Map <span class="hljs-title">createMap</span><span class="hljs-params">()</span> </span>&#123;<br>        Map&lt;String, String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;() &#123;&#123;<br>            put(<span class="hljs-string">&quot;k1&quot;</span>, <span class="hljs-string">&quot;v1&quot;</span>);<br>            put(<span class="hljs-string">&quot;k2&quot;</span>, <span class="hljs-string">&quot;v2&quot;</span>);<br>        &#125;&#125;;<br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://gitee.com/hypocrite30/ImgBed/raw/master/img/JavaCommons/image-20210515200626985.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p> æ‰§è¡Œç»“æœï¼šSolution</p>
</blockquote>
<p>ç»“è®ºï¼šåŒ¿åå†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>$0</code> å¯ä»¥æ­£å¸¸è·å–å¤–éƒ¨ç±»ï¼Œè¾“å…¥ç›¸å…³ä¿¡æ¯ã€‚</p>
<h3 id="â‘¢åŒ¿åå†…éƒ¨ç±»éšæ‚£"><a href="#â‘¢åŒ¿åå†…éƒ¨ç±»éšæ‚£" class="headerlink" title="â‘¢åŒ¿åå†…éƒ¨ç±»éšæ‚£"></a>â‘¢åŒ¿åå†…éƒ¨ç±»éšæ‚£</h3><ul>
<li>æ­£å¸¸ä»£ç ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">createMap</span><span class="hljs-params">()</span> </span>&#123;<br>    Map map = <span class="hljs-keyword">new</span> HashMap() &#123;&#123;<br>        put(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>        put(<span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>        put(<span class="hljs-string">&quot;map3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>    &#125;&#125;;<br>    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span><br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>è½¬æ¢æˆè¿™æ ·å°±<strong>æœ‰å¯èƒ½</strong>é€ æˆ<strong>å†…å­˜æ³„æ¼</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> Map <span class="hljs-title">createMap</span><span class="hljs-params">()</span> </span>&#123;<br>    Map map = <span class="hljs-keyword">new</span> HashMap() &#123;&#123;<br>        put(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>        put(<span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>        put(<span class="hljs-string">&quot;map3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>    &#125;&#125;;<br>    <span class="hljs-keyword">return</span> map;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>å› ä¸ºå½“æ­¤ <code>map</code> è¢«<strong>èµ‹å€¼ä¸ºå…¶ä»–ç±»å±æ€§</strong>æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ GC æ”¶é›†æ—¶ä¸æ¸…ç†æ­¤å¯¹è±¡ï¼Œè¿™æ—¶å€™æ‰ä¼šå¯¼è‡´<strong>å†…å­˜æ³„æ¼</strong>ã€‚</p>
<p>éé™æ€åŒ¿åå†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨ï¼Œå› æ­¤ä¸²è¡ŒåŒ–è¿™ä¸ªé›†åˆæ—¶å¤–éƒ¨ç±»ä¹Ÿä¼šè¢«ä¸²è¡ŒåŒ–ï¼Œå½“å¤–éƒ¨ç±»æ²¡æœ‰å®ç°<code>serialize</code>æ¥å£æ—¶ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<ul>
<li>æŠŠ <code>map</code> å¯¹è±¡å£°æ˜ä¸º <code>static</code> é™æ€ç±»å‹å°±ä¸ä¼šæ³„æ¼å†…å­˜</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Map <span class="hljs-title">createMap</span><span class="hljs-params">()</span> </span>&#123;<br>    Map map = <span class="hljs-keyword">new</span> HashMap() &#123;&#123;<br>        put(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>        put(<span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>        put(<span class="hljs-string">&quot;map3&quot;</span>, <span class="hljs-string">&quot;value3&quot;</span>);<br>    &#125;&#125;;<br>    <span class="hljs-keyword">return</span> map;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>åç¼–è¯‘æŸ¥çœ‹</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>$1 <span class="hljs-keyword">extends</span> <span class="hljs-title">java</span>.<span class="hljs-title">util</span>.<span class="hljs-title">HashMap</span> </span>&#123;<br>  Solution$<span class="hljs-number">1</span>();<br>    Code:<br>       <span class="hljs-number">0</span>: aload_0<br>       1: invokespecial #1                  // Method java/util/HashMap.&quot;&lt;init&gt;&quot;:()V<br>       <span class="hljs-number">4</span>: aload_0<br>       5: ldc           #2                  // String map1<br>       7: ldc           #3                  // String value1<br>       9: invokevirtual #4                  // Method put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;<br>      <span class="hljs-number">12</span>: pop<br>      <span class="hljs-number">13</span>: aload_0<br>      14: ldc           #5                  // String map2<br>      16: ldc           #6                  // String value2<br>      18: invokevirtual #4                  // Method put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;<br>      <span class="hljs-number">21</span>: pop<br>      <span class="hljs-number">22</span>: aload_0<br>      23: ldc           #7                  // String map3<br>      25: ldc           #8                  // String value3<br>      27: invokevirtual #4                  // Method put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;<br>      <span class="hljs-number">30</span>: pop<br>      <span class="hljs-number">31</span>: <span class="hljs-keyword">return</span><br>&#125;<br></code></pre></div></td></tr></table></figure>
<ul>
<li>æ²¡æœ‰ <code>putfield</code> å…³é”®å­—ï¼Œ<strong>é™æ€åŒ¿åç±»ä¸ä¼šæŒæœ‰å¤–éƒ¨å¯¹è±¡å¼•ç”¨</strong> </li>
<li>å› ä¸ºåŒ¿åå†…éƒ¨ç±»æ˜¯é™æ€çš„ä¹‹åï¼Œå®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡æˆ–å±æ€§ä¹Ÿå¿…é¡»æ˜¯é™æ€çš„äº†ï¼Œå› æ­¤å°±å¯ä»¥ç›´æ¥ä» JVM çš„ Method Areaï¼ˆæ–¹æ³•åŒºï¼‰è·å–åˆ°å¼•ç”¨è€Œæ— éœ€æŒä¹…å¤–éƒ¨å¯¹è±¡äº†</li>
<li>å°½ç®¡å¦‚æ­¤è¿˜æ˜¯ä¸å»ºè®®ä½¿ç”¨åŒæ‹¬å·æ–¹å¼åˆå§‹map</li>
</ul>
<h3 id="â‘£æ›¿ä»£æ–¹æ¡ˆ"><a href="#â‘£æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="â‘£æ›¿ä»£æ–¹æ¡ˆ"></a>â‘£æ›¿ä»£æ–¹æ¡ˆ</h3><ol>
<li>Stream</li>
</ol>
<ul>
<li>Java8 çš„ Stream API</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">List list = <span class="hljs-keyword">new</span> ArrayList() &#123;&#123;<br>    add(<span class="hljs-string">&quot;Java&quot;</span>);<br>    add(<span class="hljs-string">&quot;Redis&quot;</span>);<br>&#125;&#125;;<br><span class="hljs-comment">// æ›¿æ¢ä¸ºâ†“</span><br>List list = Stream.of(<span class="hljs-string">&quot;Java&quot;</span>, <span class="hljs-string">&quot;Redis&quot;</span>).collect(Collectors.toList());<br></code></pre></div></td></tr></table></figure>
<ol start="2">
<li>Java9é›†åˆå·¥å‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">Map map = <span class="hljs-keyword">new</span> HashMap() &#123;&#123;<br>    put(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;value1&quot;</span>);<br>    put(<span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;value2&quot;</span>);<br>&#125;&#125;;<br><span class="hljs-comment">// æ›¿æ¢ä¸ºâ†“</span><br>Map map = Map.of(<span class="hljs-string">&quot;map1&quot;</span>, <span class="hljs-string">&quot;Java&quot;</span>, <span class="hljs-string">&quot;map2&quot;</span>, <span class="hljs-string">&quot;Redis&quot;</span>);<br></code></pre></div></td></tr></table></figure>
<blockquote>
<p>é¸£è°¢ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/vipstone/p/12937582.html">https://www.cnblogs.com/vipstone/p/12937582.html</a></p>
</blockquote>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/JavaSE/">JavaSE</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/06/02/JVM/JVM%E3%80%8CHotSpot%20VM%E3%80%8D/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JVMã€ŒHotSpot VMã€</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/04/22/Redis/Redis/">
                        <span class="hidden-mobile">Redis</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     Â© 2019-2021 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


</body>
</html>
